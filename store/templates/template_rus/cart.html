{% load static %}
{% load i18n %}
{% load all_go %}
{% load mathfilters %}
  {% load rate %}
 {% get_current_language as LANGUAGE_CODE1 %}
 {% if  LANGUAGE_CODE1 == "hy" %}
{% include 'template_arm/cart.html' %}
{% elif LANGUAGE_CODE1 == "en" %}
{% include 'template_eng/cart.html' %}
{% else %}
<!DOCTYPE html>
<!-- saved from url=(0196)https://demo-idea.myinsales.ru/?_ga=2.23619514.1229686566.1677956565-1212046676.1677956565&_gl=1*l5e2xo*_ga*MTIxMjA0NjY3Ni4xNjc3OTU2NTY1*_ga_185QYQKX7V*MTY3Nzk1NjU2NS4xLjAuMTY3Nzk1NjU2NS42MC4wLjA. -->
<html style="--color-btn-bg:#7188D4; --color-btn-bg-is-dark:true; --bg:#FFFFFF; --bg-is-dark:false; --color-text: var(--color-text-dark); --color-text-minor-shade: var(--color-text-dark-minor-shade); --color-text-major-shade: var(--color-text-dark-major-shade); --color-text-half-shade: var(--color-text-dark-half-shade); --color-notice-warning-is-dark:false; --color-notice-success-is-dark:false; --color-notice-error-is-dark:false; --color-notice-info-is-dark:false; --color-form-controls-bg:var(--bg); --color-form-controls-bg-disabled:var(--bg-minor-shade); --color-form-controls-border-color:var(--bg-half-shade); --color-form-controls-color:var(--color-text); --is-editor:false; --vh:568px; --fixed-panels-bottom-offset:0px;"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta data-config="{&quot;money_with_currency_format&quot;:{&quot;delimiter&quot;:&quot; &quot;,&quot;separator&quot;:&quot;.&quot;,&quot;format&quot;:&quot;%n %u&quot;,&quot;unit&quot;:&quot;₽&quot;,&quot;show_price_without_cents&quot;:1},&quot;currency_code&quot;:&quot;RUR&quot;,&quot;default_currency&quot;:{&quot;title&quot;:&quot;Российский рубль&quot;,&quot;code&quot;:&quot;RUR&quot;,&quot;rate&quot;:1.0,&quot;format_string&quot;:&quot;%n %u&quot;,&quot;unit&quot;:&quot;₽&quot;,&quot;price_separator&quot;:&quot;&quot;,&quot;is_default&quot;:true,&quot;price_delimiter&quot;:&quot;&quot;,&quot;show_price_with_delimiter&quot;:true,&quot;show_price_without_cents&quot;:true},&quot;facebook&quot;:{&quot;pixelActive&quot;:false,&quot;currency_code&quot;:&quot;RUB&quot;,&quot;use_variants&quot;:null},&quot;vk&quot;:{&quot;pixel_active&quot;:null,&quot;price_list_id&quot;:null},&quot;new_ya_metrika&quot;:false,&quot;ecommerce_data_container&quot;:&quot;dataLayer&quot;,&quot;common_js_version&quot;:null,&quot;vue_ui_version&quot;:null,&quot;feedback_captcha_enabled&quot;:&quot;1&quot;,&quot;account_id&quot;:1215183,&quot;hide_items_out_of_stock&quot;:false,&quot;forbid_order_over_existing&quot;:false,&quot;minimum_items_price&quot;:null,&quot;enable_comparison&quot;:true,&quot;locale&quot;:&quot;ru&quot;,&quot;client_group&quot;:null,&quot;consent_to_personal_data&quot;:{&quot;active&quot;:false,&quot;obligatory&quot;:true,&quot;description&quot;:&quot;Настоящим подтверждаю, что я ознакомлен и согласен с условиями \u003ca href=&#39;/page/oferta&#39; target=&#39;blank&#39;\u003eоферты и политики конфиденциальности\u003c/a\u003e.&quot;},&quot;recaptcha_key&quot;:&quot;6Lc0T0YUAAAAAAVNiH-_bnSC4E-YHMFTeYOqZyRx&quot;,&quot;checkout_float_order_content_block&quot;:false,&quot;sber_id_app_id&quot;:&quot;5b5a3c11-72e5-4871-8649-4cdbab3ba9a4&quot;,&quot;theme_generation&quot;:4,&quot;quick_checkout_captcha_enabled&quot;:false,&quot;max_order_lines_count&quot;:500}" name="shop-config" content=""><meta name="js-evnvironment" content="production"><meta name="default-locale" content="ru"><meta name="insales-redefined-api-methods" content="[]">
        <!--InsalesCounter -->
        <script type="text/javascript" async="" src="{% static 'js/insales_counter.js' %}"></script>
        <!-- /InsalesCounter -->

    <!-- meta -->
<title>Cart
</title>


<meta name="description" content="boutiquebroderie">
<meta data-config="{&quot;static-versioned&quot;: &quot;1.38&quot;}" name="theme-meta-data" content="">
<meta name="robots" content="index,follow">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="SKYPE_TOOLBAR" content="SKYPE_TOOLBAR_PARSER_COMPATIBLE">
<meta name="format-detection" content="telephone=no">

<!-- canonical url-->

<!-- rss feed-->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://boutiquebroderie.com">
    <meta property="og:title" content="boutiquebroderie">

    
    
    


<style type="text/css">
    .icon-cart:before {
    content: "\E80D";
}
</style>


<!-- icons-->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/davidhhh123/jsall@main/icons.css">
<link rel="icon" type="image/png" sizes="16x16" href="https://cdn.jsdelivr.net/gh/davidhhh123/jsall@main/32275806.ico"><style media="screen">
  @supports (content-visibility: hidden) {
    body:not(.settings_loaded) {
      content-visibility: hidden;
    }
  }
  @supports not (content-visibility: hidden) {
    body:not(.settings_loaded) {
      visibility: hidden;
    }
  }
  .error_win{
    display: none;
  }
  @media screen and (max-width: 767px){
    .cart__area-items{
       overflow-y: auto;
    max-height: 500px;

    }
  }
 
  .loader-container_alert {
            display: none;
    justify-content: center;
    align-items: center;
    height: 100vh;
    position: fixed;
    width: 100%;
    z-index: 999999999999999;
    background: #69696933;
        }

        /* Styles for the loader */
        .loader-container_alert .loader {
            border: 4px solid #dd626f;
            border-top: 4px solid transparent;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 1s linear infinite;
        }

        /* Keyframes for the loader animation */
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }


</style>

  </head>
  {% with rate=request|Get_pay_rate %}
  <body data-multi-lang="false" data-theme-template="index" data-sidebar-type="sticky" data-sidebar-position="left" class="settings_loaded">
      <div class="loader-container_alert">
        <div class="loader"></div>
    </div>
    <div class="preloader">
      <div class="lds-ellipsis"><div></div><div></div><div></div><div></div></div>
    </div>
    <noscript>
<div class="njs-alert-overlay">
  <div class="njs-alert-wrapper">
    <div class="njs-alert">
      <p></p>
    </div>
  </div>
</div>

</noscript>

    <div class="page_layout page_layout_sticky_left ">
      <header>
      
        <div class="layout widget-type_system_widget_v4_header_1" style="--logo-img:&#39;https://static.insales-cdn.com/files/1/7649/24960481/original/Frame.png&#39;; --logo-max-width:160px; --hide-menu-photo:false; --hide-search:false; --hide-language:false; --hide-compare:true; --hide-personal:false; --hide-favorite:false; --hide-total-price:false; --bage-bg:#7188D4; --bage-bg-is-dark:true; --bage-bg-minor-shade:#8095d9; --bage-bg-minor-shade-is-dark:true; --bage-bg-major-shade:#8ea0dd; --bage-bg-major-shade-is-dark:true; --bage-bg-half-shade:#b8c4ea; --bage-bg-half-shade-is-light:true; --bg-top-panel:#E5EBFF; --bg-top-panel-is-light:true; --bg-top-panel-minor-shade:#e5ebff; --bg-top-panel-minor-shade-is-light:true; --bg-top-panel-major-shade:#e4eaff; --bg-top-panel-major-shade-is-light:true; --bg-top-panel-half-shade:#d9e2ff; --bg-top-panel-half-shade-is-light:true; --menu-grid-list-min-width:220px; --menu-grid-list-row-gap:3rem; --menu-grid-list-column-gap:3rem; --subcollections-items-limit:10; --menu-img-ratio:1; --live-search:true; --header-wide-bg:true; --header-top-pt:0.5vw; --header-top-pb:0.5vw; --header-main-pt:1vw; --header-main-pb:2vw; --header-wide-content:false; --hide-desktop:false; --hide-mobile:false;">


      
      </header>

      




<!--main-->
 <main>
        
  <div class="layout widget-type_widget_v4_back_to_catalog_32f538a0a042f577b5301462c18b395a" style="--layout-wide-bg:true; --layout-pt:1vw; --layout-pb:1vw; --layout-wide-content:false; --layout-edge:false; --hide-desktop:false; --hide-mobile:false;">
  <div class="layout__content">
    

<div class="button back_to_catalog delete_cart_all_product"><span class="icon icon-trash"></span><span>Очистить корзину</span></div>


  </div>
</div>


  <div class="layout widget-type_system_widget_v4_cart_2" style="--border-radius:8px; --img-fit:contain; --img-ratio:1; --layout-wide-bg:true; --layout-pt:1vw; --layout-pb:1vw; --layout-wide-content:false; --layout-edge:false; --hide-desktop:false; --hide-mobile:false;">
  <div class="layout__content">
    
<h1 class="heading">Корзина</h1>


<div action="" class="cart with-coupon" method="post" data-cart-form="" data-reload-on-coupon="false" data-cart-form-inited="true">
  <div class="cart__area-items">
    
   
    {% for product in cart %}
     <div class="cart-item" id="cart-item{{ product.pk }}" data-product-id="336490978" data-item-id="573211243">
      <div class="item-image">
        <div class="img-ratio img-ratio_cover img-ratio_cart">
          <div class="img-ratio__inner">
            {% if product.product.avatar_p is not None %}
             <img  src="{{product.product.avatar_p.url}}" class="item-image">
            {% else %}
             <img  src="{% static 'images/GRBD_SET_TIFFANY_big.jpg' %}" class="item-image">
            {% endif %}
           
            
          </div>
        </div>
      </div>
      <div style="cursor: pointer;" onclick="on_click_href(`{% url 'accounts:product_detalis_view' product.product.pk %}`)" class="item-title">
      {{product.product.name_ru}}


      
      </div>


      <div class="item-price">
        <span class="price" data-cart-item-price="">{% if product.sale > 0 %}
        {{product.product.sale_price|div:rate.0|floatformat:2}}
        {% else %}
        {{product.product.price|div:rate.0|floatformat:2}}
        {% endif %}
&nbsp;₽</span>
      </div>
      <div class="item-counter ">
        <div class="counter" data-quantity="" data-quantity-change-init="true">
           

          {% if product.indicator == "size" %}
           <button type="button" data-quantity-change="-1" class="counter-button button button_size-s is-count-down_size " {% if product.product.sale_price_size %}  price="{{ product.product.sale_price_size|div:rate.0|div:10|floatformat:2 }}"{% else %}  price="{{product.product.price_size|div:10|div:rate.0|floatformat:2}}"{% endif %}  {% if product.product.max_size  == 0 %}min_size="0"{% else %}min_size="{{ product.product.min_size }}"{% endif %} key = "{{forloop.counter0}}"><span class="icon icon-minus"></span></button>
          <input type="text" key = "{{forloop.counter0}}" cpk="{{product.pk}}"  pk="{{product.product.pk}}"

          {% if product.count_size > product.product.max_size %}value="{{ product.product.max_size }} см"{% else %}value="{{ product.count_size }} см"{% endif %}  name="cart[quantity][573211243]" class="counter-input input_sizes form-control  form-control_size-s" id="counter-input{{ forloop.counter0 }}" last_size= "{{product.count_size}}" {% if product.product.sale_price_size %}  price="{{ product.product.sale_price_size|div:rate.0|div:10|floatformat:2 }}"{% else %} price="{{product.product.price_size|div:10|div:rate.0|floatformat:2}}"{% endif %} {% if product.product.max_size  == 0 %}min_size="0"{% else %}min_size="{{ product.product.min_size }}"{% endif %} max="{{ product.product.max_size }}" status="lock"   {% if not product.product.available %}
          style="background:red;width: 5.5rem;" 

          {% else %}
          style="width: 5.5rem;" 
          {% endif %}>
          <button type="button" data-quantity-change="1" class="counter-button button button_size-s is-count-up_size "  {% if product.product.max_size  == 0 %}min_size="0"{% else %}min_size="{{ product.product.min_size }}"{% endif %} {% if product.product.sale_price_size %} price="{{ product.product.sale_price_size|div:rate.0|div:10|floatformat:2 }}"{% else %} price="{{product.product.price_size|div:10|div:rate.0|floatformat:2}}"{% endif %} key = "{{forloop.counter0}}" pk="{{ product.product.pk }}" ><span class="icon icon-plus"></span></button>
         {% elif  product.indicator == "counter" %}
           <button type="button" data-quantity-change="-1" class="counter-button button button_size-s is-count-down " {% with firstname=product.count|checkcounters:product.product.pk %}
    {% if firstname is not None %}
   
      price="{{firstname|div:rate.0|floatformat:2}}"

      

             
    {% else %}
    
     price="{{product.product.price|div:rate.0|floatformat:2}}"

      
             
    {% endif %}
  {% endwith %}  key = "{{forloop.counter0}}"><span class="icon icon-minus"></span></button>
          <input type="text"   counters="{% for count in product.product.counter_props.all %}{{count.counter_prop}},{% endfor %}" counters_price = "{% for count in product.product.counter_props.all %}{% if product.product.sale > 0  %}{{count.counter_price_sale|div:rate.0|floatformat:2}}{% else %}{{count.counter_price|div:rate.0|floatformat:2}}{% endif %},{% endfor %}"

            key = "{{forloop.counter0}}" cpk="{{product.pk}}"  pk="{{product.product.pk}}"  {% if product.count > product.product.pcs %}value="{{ product.product.pcs }}"{% else %}value="{{ product.count }}"{% endif %}   name="cart[quantity][573211243]" last_count="{{ product.count }}" class="counter-input input_counters form-control form-control_size-s" {% if not product.product.available %}
          style="background:red;width: 5.5rem;" 

          {% else %}
          style="width: 5.5rem;" 
          {% endif %}id="counter-input{{ forloop.counter0 }}"  {% with firstname=product.count|checkcounters:product.product.pk %}
    {% if firstname is not None %}
   
      price="{{firstname|div:rate.0|floatformat:2}}"

      

             
    {% else %}
    
     price="{{product.product.price|div:rate.0|floatformat:2}}"

      
             
    {% endif %}
  {% endwith %} max="{{ product.product.pcs }}" status="lock">
          <button type="button" data-quantity-change="1" class="counter-button button button_size-s is-count-up "



           {% with firstname=product.count|checkcounters:product.product.pk %}
    {% if firstname is not None %}
   
      price="{{firstname|div:rate.0|floatformat:2}}"

      

             
    {% else %}
    
     price="{{product.product.price|div:rate.0|floatformat:2}}"

      
             
    {% endif %}
  {% endwith %} key = "{{forloop.counter0}}" pk="{{ product.product.pk }}" ><span class="icon icon-plus"></span></button>
          {% elif  product.indicator == "size_pcs" %}
          <button type="button" data-quantity-change="-1" class="counter-button button button_size-s is-count-down " {% if product.product.sale_price_pcs %}
          price="{{product.product.sale_price_pcs|div:rate.0|floatformat:2}}"
          {% else %}
          price="{{ product.product.price_pcs|div:rate.0|floatformat:2 }}"
          {% endif %}  key = "{{forloop.counter0}}"><span class="icon icon-minus"></span></button>
          <input type="text" key = "{{forloop.counter0}}" cpk="{{product.pk}}"  pk="{{product.product.pk}}"  {% if product.count > product.product.pcs %}value="{{ product.product.pcs }}"{% else %}value="{{ product.count }}"{% endif %}  name="cart[quantity][573211243]" class="counter-input input_counters form-control form-control_size-s" last_count="{{ product.count }}"  id="counter-input{{ forloop.counter0 }}"  {% if product.product.sale_price_pcs %}
          price="{{product.product.sale_price_pcs|div:rate.0|floatformat:2}}"
          {% else %}
          price="{{ product.product.price_pcs|div:rate.0|floatformat:2 }}"
          {% endif %} max="{{ product.product.pcs}}" status="lock" {% if not product.product.available %}
          style="background:red;width: 5.5rem;" 

          {% else %}
          style="width: 5.5rem;" 
          {% endif %}>
          <button type="button" data-quantity-change="1" class="counter-button button button_size-s is-count-up "  {% if product.product.sale_price_pcs %}
          price="{{product.product.sale_price_pcs|div:rate.0|floatformat:2}}"
          {% else %}
          price="{{ product.product.price_pcs|div:rate.0|floatformat:2 }}"
          {% endif %} key = "{{forloop.counter0}}" pk="{{ product.product.pk }}" ><span class="icon icon-plus"></span></button>




          {% elif  product.indicator == "count" %}
          <button type="button" data-quantity-change="-1" class="counter-button button button_size-s is-count-down " {% if product.product.sale_price %}
          price="{{product.product.sale_price|div:rate.0|floatformat:2}}"
          {% else %}
          price="{{ product.product.price|div:rate.0|floatformat:2 }}"
          {% endif %}  key = "{{forloop.counter0}}"><span class="icon icon-minus"></span></button>
          <input type="text" key = "{{forloop.counter0}}" cpk="{{product.pk}}"  pk="{{product.product.pk}}" {% if product.count > product.product.pcs %}value="{{ product.product.pcs }}"{% else %}value="{{ product.count }}"{% endif %}  name="cart[quantity][573211243]" last_count="{{ product.count }}"  class="counter-input input_counters form-control form-control_size-s" id="counter-input{{ forloop.counter0 }}"  {% if product.product.sale_price %}
          price="{{product.product.sale_price|div:rate.0|floatformat:2}}"
          {% else %}
          price="{{ product.product.price|div:rate.0|floatformat:2 }}"
          {% endif %} max="{{ product.product.pcs }}" status="lock" {% if not product.product.available %}
          style="background:red;width: 5.5rem;" 

          {% else %}
          style="width: 5.5rem;" 
          {% endif %}>
          <button type="button" data-quantity-change="1" class="counter-button button button_size-s is-count-up "  {% if product.product.sale_price %}
          price="{{product.product.sale_price|div:rate.0|floatformat:2}}"
          {% else %}
          price="{{ product.product.price|div:rate.0|floatformat:2 }}"
          {% endif %} key = "{{forloop.counter0}}" pk="{{ product.product.pk }}" ><span class="icon icon-plus"></span></button>
          {% else %}
{% endif %}

         
        </div>
      </div>
     
{% if product.indicator == "size" %}
{% if product.product.sale_price_size %}
<div class="item-total" data-cart-item-total-price="">
        

      
        
              




{{ product.product.sale_price_size|div:rate.0|floatformat:2 }}




      &nbsp;{% if rate.1 == 'ARM' %}֏{% elif rate.1 == "ENG" %}${% elif rate.1 == "EUR" %}€{% else %}₽{% endif %} за 1 м</div>
{% else %}
<div class="item-total" data-cart-item-total-price="">
        

      
        
              




{{ product.product.price_size|div:rate.0|floatformat:2 }}




      &nbsp;{% if rate.1 == 'ARM' %}֏{% elif rate.1 == "ENG" %}${% elif rate.1 == "EUR" %}€{% else %}₽{% endif %} за 1 м</div>
{% endif %}

{% elif  product.indicator == "counter" %}

{% with firstname=product.count|checkcounters:product.product.pk %}
    {% if firstname is not None %}
    <div class="item-total" data-cart-item-total-price="">
      {{firstname|div:rate.0|floatformat:2}}&nbsp;{% if rate.1 == 'ARM' %}֏{% elif rate.1 == "ENG" %}${% elif rate.1 == "EUR" %}€{% else %}₽{% endif %}
</div>
      

             
    {% else %}
    <div class="item-total" data-cart-item-total-price="">
     {{product.product.price|div:rate.0|floatformat:2}}&nbsp;{% if rate.1 == 'ARM' %}֏{% elif rate.1 == "ENG" %}${% elif rate.1 == "EUR" %}€{% else %}₽{% endif %}
</div>
      
             
    {% endif %}
  {% endwith %}
{% elif  product.indicator == "size_pcs" %}
{% if product.product.sale_price_pcs %}
<div class="item-total" data-cart-item-total-price="">
     {{product.product.sale_price_pcs|div:rate.0|floatformat:2}}&nbsp;{% if rate.1 == 'ARM' %}֏{% elif rate.1 == "ENG" %}${% elif rate.1 == "EUR" %}€{% else %}₽{% endif %}за 1 кусок
</div>
{% else %}
<div class="item-total" data-cart-item-total-price="">
     {{product.product.price_pcs|div:rate.0|floatformat:2}}&nbsp;{% if rate.1 == 'ARM' %}֏{% elif rate.1 == "ENG" %}${% elif rate.1 == "EUR" %}€{% else %}₽{% endif %}
     за 1 кусок
</div>
{% endif %}


{% elif  product.indicator == "count" %}
{% if product.product.sale_price %}
<div class="item-total" data-cart-item-total-price="">
     {{product.product.sale_price|div:rate.0|floatformat:2}}&nbsp;{% if rate.1 == 'ARM' %}֏{% elif rate.1 == "ENG" %}${% elif rate.1 == "EUR" %}€{% else %}₽{% endif %}
</div>
{% else %}
<div class="item-total" data-cart-item-total-price="">
     {{product.product.price|div:rate.0|floatformat:2}}&nbsp;{% if rate.1 == 'ARM' %}֏{% elif rate.1 == "ENG" %}${% elif rate.1 == "EUR" %}€{% else %}₽{% endif %}
</div>
{% endif %}


{% else %}
{% endif %}
      
      
   


      <div class="item-delete">
        
        

        <button class="button js-item-delete" id="delete_id{{forloop.counter0}}" type="submit" {% if   product.indicator == "counter" %}
         {% with firstname=product.count|checkcounters:product.product.pk %}
    {% if firstname is not None %}
   
      counter_price ="{{firstname|div:rate.0|floatformat:2}}"

      

             
    {% else %}
    
     counter_price ="{{product.product.price|div:rate.0|floatformat:2}}"

      
             
    {% endif %}
  {% endwith %}
         

        {% else %}
        {% endif %} data-item_delete="{{ product.pk }}"><span class="icon icon-trash"></span> Удалить</button>
        <p id="error{{forloop.counter0}}" class="error_win">Максимальное количество  <span>{{ product.product.pcs }}</span>  шт</p>
      </div>
    </div>

    {% endfor %}
   
    
  </div>
  <div class="cart__area-controls">
    <div class="cart__area-controls-sticky">
      <div class="cart__area-count">
        <div class="sidebar_header">В корзине</div>
        <div class="sidebar-size-items">
          <span>Товаров: </span>
          <span data-cart-positions-count="" class="products_count">{{count}}</span>
        </div>
      </div>
      <div class="cart__area-coupon">
        
               <div class="coupon-notice" data-cart-discounts-error="false"></div>
        <div class="coupon-content hidden">
          <input type="text" placeholder="Промокод" class="form-control form-control_size-m form-control_wide" name="cart[coupon]" value="">
          <button type="submit" class="coupon-button button button-link_size-m" data-coupon-submit="">Активировать</button>
        </div>
        
        <div class="discount" data-cart-discounts-ajax="false"></div>

        <div class="total">

          <span class="total-amount" data-cart-total-price=""><span>

          {{sums|div:rate.0|floatformat:2}}</span>&nbsp;{% if rate.1 == 'ARM' %}֏{% elif rate.1 == "ENG" %}${% elif rate.1 == "EUR" %}€{% else %}₽{% endif %}</span>
        </div>
      </div>
      <div class="cart-controls">
        {% if sums|div:rate.0|floatformat:2|mul:100 >= max_per|div:rate.0|floatformat:2|mul:100 %}

        <button type="button" class="button button_size-l button_wide make_order_class" data-cart-submit="">Оформить заказ</button>
        {% else %}
        <p  class="button button_size-l button_wide"  style="cursor: default;">Минимальная сумма заказа {{max_per|div:rate.0|floatformat:2}} {% if rate.1 == 'ARM' %}֏{% elif rate.1 == "ENG" %}${% elif rate.1 == "EUR" %}€{% else %}₽{% endif %} </p>
        {% endif %}
        
      </div>
    </div>
  </div>
  <input type="hidden" name="_method" value="put">
  <input type="hidden" name="make_order" value="">
  <input type="hidden" name="lang" value="ru">
</div>


<div class="text-center js-cart-empty hidden">
  <div class="empty-title">Ваша корзина пуста</div>
  <div class="empty-info">Акции, специальные предложения и обзоры самых интересных товаров <a href="#">на главной странице</a><br>помогут вам определиться с выбором!</div>
</div>

  </div>
</div>


  <div class="layout widget-type_system_widget_v4_special_products_10" style="--product-desc-limit:10; --hide-description:true; --count-special-products:6; --slide-width:200px; --slide-gap:30; --img-ratio:1; --img-fit:cover; --switch-img-on-hover:false; --border-radius:8px; --rounding-button:true; --product-info-accent:price; --product-info-align:left; --sticker-font-size:0.7rem; --slide-width-mobile:120px; --slide-gap-mobile:15; --hide-mobile-modal-variants:false; --layout-wide-bg:false; --layout-pt:3vw; --layout-pb:3vw; --layout-wide-content:false; --layout-edge:false; --hide-desktop:false; --hide-mobile:false;">
  <div class="layout__content">
    


<div class="special-products js-special-products">
  
  
      
      
      
         
      
      </div>
    </div>
  </div>
</div>








  </div>
</div>



      </main>
<link href="https://cdn.jsdelivr.net/gh/davidhhh123/jsall@main/cart.css" rel="stylesheet" type="text/css">


      
    
    </div>
    
    <div data-fixed-panels="bottom">
      
       
      
    </div>


  <script src="https://cdn.jsdelivr.net/gh/davidhhh123/jsall@main/my-layout.js"></script>
  <link href="https://cdn.jsdelivr.net/gh/davidhhh123/jsall@main/core-css.css" rel="stylesheet" type="text/css">
  
  <script src="https://cdn.jsdelivr.net/gh/davidhhh123/jsall@main/jquery.min.js"></script>

  <script src="https://cdn.jsdelivr.net/gh/davidhhh123/jsall@main/jquery.cut-list.js"></script>
  <link href="https://cdn.jsdelivr.net/gh/davidhhh123/jsall@main/jquery.cut-list.css" rel="stylesheet" type="text/css">
    <script src="https://cdn.jsdelivr.net/gh/davidhhh123/jsall@main/microAlert_4.js"></script>
  <link href="https://cdn.jsdelivr.net/gh/davidhhh123/jsall@main/microAlert.css" rel="stylesheet" type="text/css">
 <script src="https://cdn.jsdelivr.net/gh/davidhhh123/jsall@main/bodyScrollLock.min.js"></script>
  <link href="https://cdn.jsdelivr.net/gh/davidhhh123/jsall@main/main.css" rel="stylesheet" type="text/css">


<script>
var bitton_check = `<button type="button" class="button button_size-l button_wide make_order_class" data-cart-submit="">Оформить заказ</button>`
  function on_click_href(href){
     window.open(href);
  }
  console.log("aaaaaa")
  {% if rate.1 == 'ARM' %}

var pay_icon="֏"
{% elif rate.1 == "ENG" %}
var pay_icon="$"
{% elif rate.1 == "EUR" %}
var pay_icon="€"
{% else %}
var pay_icon="₽"
{% endif %}
var  all_price=parseFloat("{{sums|div:rate.0|floatformat:2}}").toFixed(2)


function calculateTotal() {
  var inputs_price_count = $(".counter-input.input_counters.form-control.form-control_size-s")
var input_price_sizes = $(".counter-input.input_sizes.form-control.form-control_size-s")
  let total = 0;
  console.log(input_price_sizes, "input_price_sizes")
  for (var price_index=0;price_index<input_price_sizes.length;price_index++){
    var price = parseFloat(input_price_sizes.eq(price_index).attr("price"))
  
total+=parseFloat(price*parseInt(input_price_sizes.eq(price_index).val().slice(0,-3))/10)
 

  }

 for (var price_index=0;price_index<inputs_price_count.length;price_index++){
  console.log(price_index, "price_index")
  if (inputs_price_count.eq(price_index).attr("counters") != undefined){
      
      var counters = inputs_price_count.eq(price_index).attr("counters")
      var prices = inputs_price_count.eq(price_index).attr("counters_price")
      var counters_array = counters.split(",");
      var prices_array = prices.split(",");

      counters_array = counters_array.filter(function(element) {
    return element !== "";
});
        prices_array = prices_array.filter(function(element) {
    return element !== "";
});
        
var index = findLastIndexLessThanOrEqual(counters_array, parseInt(inputs_price_count.eq(price_index).val()))
    console.log(index, counters_array, inputs_price_count.eq(price_index).val())

    if (index != -1){
      console.log(prices_array[index])

        

    }

    }
    else{
      var index = -1
    }
    if(index!=-1){
      var price = parseFloat(prices_array[index])
    }
    else{
      var price = parseFloat(inputs_price_count.eq(price_index).attr("price"))
    }

total+=parseFloat(price*parseInt(inputs_price_count.eq(price_index).val()))
  console.log(price,price_index.index , "price",inputs_price_count.eq(price_index))
 
 }
  
 all_price=total
 console.log(all_price,max_per, "max")
 
$(".total-amount").text(String(all_price.toFixed(2))+pay_icon)
  return total;
}
calculateTotal()


function findLastIndexLessThanOrEqual(arr, value) {
  let lastIndex = -1;

  for (let i = 0; i < arr.length; i++) {
    if (arr[i] <= value) {
      lastIndex = i;
    }
  }

  return lastIndex;
}

var max_per = parseInt("{{max_per|div:rate.0|floatformat:2}}")

function check_max_count(pk,size,callback){
  
  var data = new FormData()
  data.append("pk", pk)
   if (size=="size"){
    data.append("size", 1)

  }
 var call = $.ajax({


              
            url: '/api/check_max_count_product/',
            method: "POST",
            data: data,
            success: function(data){

              callback(data);
              

                
                
                
                
                

            },
            error: function(data){},
            processData: false,
            contentType: false,
        })

  

}

$(".is-count-up_size").on("click", function(){
 var error_str = "Максимальное количество "
var key = $(this).attr("key")
    var product_count = parseInt($("#counter-input"+String(key)).val()) ;
    var status_div =$("#counter-input"+String(key))
    var status=status_div.attr("status")
   
    if (product_count+10>=parseInt($("#counter-input"+String(key)).attr("max")) && status != "block"){
      var product_price = parseFloat($(this).attr("price"))
      check_max_count($(this).attr("pk"),"size", function(data){
        console.log(data.max_count, "ok")
        $("#counter-input"+String(key)).val(String(data.max_count)+" см")
        

   all_price+= product_price
   calculateTotal() 

   if (Math.abs(all_price.toFixed(2)*100)<Math.abs(parseFloat(max_per).toFixed(2)*100)){
      
      $(".cart-controls").html(`<p class="button button_size-l button_wide" style="cursor: default;">Минимальная сумма заказа՝ `+ max_per +` `+ pay_icon +` </p>`)

    }
  else{
     $(".cart-controls").html(bitton_check)

  }

    $(".total-amount").text(String(all_price.toFixed(2))+pay_icon)
    status_div.attr("status", "block")
    error_str = "Максимальная длина "+String($("#counter-input"+String(key)).attr("max"))+" см"



      })
      
    }
    else if (status=="block"){
      console.log("error")
      error_str+=String($("#counter-input"+String(key)).attr("max")) +" см"
       $("#error"+String(key)).text(error_str)
      $("#error"+String(key)).css("display", "block")
    }
    else{
       product_count+=10;
       
       
       var product_price = parseFloat($(this).attr("price"))
       
   
      $("#counter-input"+String(key)).val(String(product_count)+" cм")
     all_price+= product_price

      $(".total-amount").text(String(all_price.toFixed(2))+pay_icon)
       $("#counter-input"+String(key)).attr("last_size", product_count)

    }
    if (all_price.toFixed(2)>=max_per){
      
      $(".cart-controls").html(bitton_check)

    }
    
    
   calculateTotal() 

})
$(".is-count-up ").on("click", function(){
var key = $(this).attr("key")
    var product_count = parseInt($("#counter-input"+String(key)).val()) ;
    var status_div =$("#counter-input"+String(key))
    var status=status_div.attr("status")
    if (status_div.attr("counters") != undefined){
      
      var counters = status_div.attr("counters")
      var prices = status_div.attr("counters_price")
      var counters_array = counters.split(",");
      var prices_array = prices.split(",");

      counters_array = counters_array.filter(function(element) {
    return element !== "";
});
        prices_array = prices_array.filter(function(element) {
    return element !== "";
});
        
var index = findLastIndexLessThanOrEqual(counters_array, product_count+1)
    console.log(index)

    if (index != -1){
      console.log(prices_array[index])

        

    }

    }
    else{
      var index = -1
    }
   
    if (product_count+1>=parseInt($("#counter-input"+String(key)).attr("max")) && status != "block"){

      var product_price = parseFloat($(this).attr("price"))
      if (index != -1){
        product_price  = parseFloat(prices_array[index])
        $("#delete_id"+String(key)).attr("counter_price",parseFloat(product_price*(product_count+1)).toFixed(2) )
      
        

    }
      check_max_count($(this).attr("pk"),1, function(data){
        console.log(data.max_count, "ok")
        $("#counter-input"+String(key)).val(data.max_count)
        

   all_price+= product_price
   if (Math.abs(all_price.toFixed(2)*100)<Math.abs(parseFloat(max_per).toFixed(2)*100)){
      
      $(".cart-controls").html(`<p class="button button_size-l button_wide" style="cursor: default;">Минимальная сумма заказа՝ `+ max_per +` `+ pay_icon +` </p>`)

    }
  else{
     $(".cart-controls").html(bitton_check)

  }
   if (index != -1){
       $("#delete_id"+String(key)).attr("counter_price",parseFloat(product_price*(product_count+1)).toFixed(2) )

     }
all_price-= product_price
 $("#error"+String(key)).css("display", "block")
    $(".total-amount").text(String(all_price.toFixed(2))+pay_icon)
    status_div.attr("status", "block")

calculateTotal()

      })
      
    }
    else if (status=="block"){
      console.log("error")
      calculateTotal()
      $("#error"+String(key)).css("display", "block")
    }
    else{
       product_count++;
       var product_price = parseFloat($(this).attr("price"))
       if (index != -1){
        product_price  = parseFloat(prices_array[index])

        
      
        

    }
   
      $("#counter-input"+String(key)).val(product_count)
     all_price+= product_price
     if (index != -1){
       $("#delete_id"+String(key)).attr("counter_price",parseFloat(product_price*(product_count+1)).toFixed(2) )

     }

      $(".total-amount").text(String(all_price.toFixed(2))+pay_icon)
      $("#counter-input"+String(key)).attr("last_size", product_count)
      calculateTotal()

    }
    if (all_price.toFixed(2)>=max_per){
      
      $(".cart-controls").html(bitton_check)

    }
    calculateTotal()

    
    
    

})

$(".is-count-down_size ").on("click", function(){
  var key = $(this).attr("key")
  $("#counter-input"+String(key)).attr("status", "lock")
   $("#error"+String(key)).css("display", "none")

  var product_count = parseInt($("#counter-input"+String(key)).val()) ;
    if(!(product_count-10<=parseInt($(this).attr("min_size")))){
        product_count-=10;

    var product_price = $(this).attr("price")
    
    $("#counter-input"+String(key)).val(String(product_count)+" см")
   all_price-= product_price
    $(".total-amount").text(String(all_price.toFixed(2))+pay_icon)
    $("#counter-input"+String(key)).attr("last_size", product_count)
         
        
    }
    else{
         var product_price = $(this).attr("price")
         product_count = $(this).attr("min_size")
    
    $("#counter-input"+String(key)).val(String(product_count)+" см")
   all_price-= product_price
    $(".total-amount").text(String(all_price.toFixed(2))+pay_icon)
    $("#counter-input"+String(key)).attr("last_size", product_count)

    }

     if (Math.abs(all_price.toFixed(2)*100)<Math.abs(parseFloat(max_per).toFixed(2)*100)){
      
      $(".cart-controls").html(`<p class="button button_size-l button_wide" style="cursor: default;">Минимальная сумма заказа՝ `+ max_per +` `+ pay_icon +` </p>`)

    }
   calculateTotal()
   
})
$(".is-count-down ").on("click", function(){
  var key = $(this).attr("key")
  $("#counter-input"+String(key)).attr("status", "lock")
   $("#error"+String(key)).css("display", "none")
   var status_div =  $("#counter-input"+String(key))

  var product_count = parseInt($("#counter-input"+String(key)).val()) ;
   if (status_div.attr("counters") != undefined){
      
      var counters = status_div.attr("counters")
      var prices = status_div.attr("counters_price")
      var counters_array = counters.split(",");
      var prices_array = prices.split(",");

      counters_array = counters_array.filter(function(element) {
    return element !== "";
});
        prices_array = prices_array.filter(function(element) {
    return element !== "";
});
        
var index = findLastIndexLessThanOrEqual(counters_array, product_count)
    console.log(index)



    }
    else{
      var index = -1
    }
   


    if(!(product_count<=1)){
        product_count--;
        var product_price = parseFloat($(this).attr("price")) 
        if (index!=-1){
          product_price  = parseFloat(prices_array[index])

        }
    
    
    $("#counter-input"+String(key)).val(product_count)
   all_price-= product_price
   if (index != -1){

       $("#delete_id"+String(key)).attr("counter_price",parseFloat(product_price*(product_count)).toFixed(2) )

     }
  $("#counter-input"+String(key)).attr("last_size", product_count)
    $(".total-amount").text(String(all_price.toFixed(2))+pay_icon)
         
        
    }
     if (Math.abs(all_price.toFixed(2)*100)<Math.abs(parseFloat(max_per).toFixed(2)*100)){
      
      $(".cart-controls").html(`<p class="button button_size-l button_wide" style="cursor: default;">Минимальная сумма заказа՝ `+ max_per +` `+ pay_icon +` </p>`)

    }
   calculateTotal()
   
})




$(".input_sizes").on("change", function(){
    product_count = parseInt($(this).val())
    var last_size = parseInt($(this).attr("last_size"))

    var status=$(this).attr("status")

    var input = $(this)
   var key = input.attr("key")

    var max_size = parseInt($(this).attr("max"))
    var min_size = parseInt($(this).attr("min_size"))
    var product_price = parseFloat($(this).attr("price"))
     console.log(product_count, min_size, "min_size")
    
    if (product_count>max_size){
            check_max_count($(this).attr("pk"),"size", function(data){
            console.log(data.max_count, "ok")
            input.val(String(data.max_count)+" см")
             $("#error"+String(key)).text("Максимальное длина товара "+ String(data.max_count)+" см")
             input.attr("last_size", data.max_count)

            $("#error"+String(key)).css("display", "block")
            var new_price = (product_price*(data.max_count-last_size)/(10))
            all_price+=new_price
    price_total = new_price
     input.val(String(data.max_count)+" см")
    input.attr("last_size", data.max_count)
    $(".total-amount").text(String(all_price.toFixed(2))+pay_icon)


       //all_price+= product_price

        //$(".total-amount").text(String(all_price)+" ₽")
        //status_div.attr("status", "block")

calculateTotal()
console.log(all_price, max_per, "max_per")
if (Math.abs(all_price.toFixed(2)*100)<Math.abs(parseFloat(max_per).toFixed(2)*100)){
      
      $(".cart-controls").html(`<p class="button button_size-l button_wide" style="cursor: default;">Минимальная сумма заказа՝ `+ max_per +` `+ pay_icon +` </p>`)

    }
  else{
     $(".cart-controls").html(bitton_check)

  }
          })

    }
    else if (product_count<=min_size){
      console.log(product_count, min_size, "min_size")
       input.val(String(min_size)+" см")
    input.attr("last_size", min_size)
    calculateTotal()


    }
    else{
         $("#error"+String(key)).css("display", "none")
         console.log((product_count-last_size), "(product_count-last_size)")
    
    
    //var new_price = (product_price*product_count/(min_size)).toFixed(2);
    new_price = (((product_count-last_size)/(10))*product_price)
    console.log(product_count, min_size, last_size, product_price)
    all_price+= new_price
    $(this).val(String(product_count)+" см")
    $(this).attr("last_size", product_count)
    $(".total-amount").text(String(all_price.toFixed(2))+pay_icon)
    
       
calculateTotal()

    var this_count = $("#in_stock option:checked").attr("value")

}

if (Math.abs(all_price.toFixed(2)*100)<Math.abs(parseFloat(max_per).toFixed(2)*100)){
      
      $(".cart-controls").html(`<p class="button button_size-l button_wide" style="cursor: default;">Минимальная сумма заказа՝ `+ max_per +` `+ pay_icon +` </p>`)

    }
  else{
     $(".cart-controls").html(bitton_check)

  }




 calculateTotal()
               
  })

$(".input_counters").on("change", function(){
    var product_count = parseInt($(this).val())
    if (product_count<=0){
      product_count = 1

    }
    var last_count = parseInt($(this).attr("last_count"))

    var status=$(this).attr("status")
    var input = $(this)


 

   
    var key = input.attr("key")
    var max_size = parseInt($(this).attr("max"))
    
    var product_price = parseFloat($(this).attr("price"))
    
    if (product_count>max_size){
            check_max_count($(this).attr("pk"), "count", function(data){
            console.log(data.max_count, "ok")
            input.val(String(data.max_count))
             $("#error"+String(key)).text("Максимальное количество товара "+ String(data.max_count))
              input.attr("last_count", data.max_count)
           $("#error"+String(key)).css("display", "block")

            var new_price = ((parseInt(last_count)-parseInt(data.max_count))*product_price)
            

       
            all_price+=new_price
    price_total = new_price
    console.log(all_price, max_per, "max_per")
    if (Math.abs(all_price.toFixed(2)*100)<Math.abs(parseFloat(max_per).toFixed(2)*100)){
      
      $(".cart-controls").html(`<p class="button button_size-l button_wide" style="cursor: default;">Минимальная сумма заказа՝ `+ max_per +` `+ pay_icon +` </p>`)

    }
  else{
     $(".cart-controls").html(bitton_check)

  }
    
    $(".total-amount").text(String(all_price.toFixed(2))+pay_icon)
    calculateTotal()

       //all_price+= product_price

        //$(".total-amount").text(String(all_price)+" ₽")
        //status_div.attr("status", "block")


          })

    }
    else{
         $("#error"+String(key)).css("display", "none")
         console.log((product_count-last_count), "(product_count-last_size)")
    
    
    //var new_price = (product_price*product_count/(min_size)).toFixed(2);
    if (last_count==1){
      
      new_price = ((product_count)*product_price)
    }
    else{
      new_price = ((product_count-last_count)*product_price)

    }

    
   
     if (last_count > product_count){
      all_price-= new_price

     }
     else{
      all_price+= new_price
     }

    
    $(this).val(String(product_count))
    $(this).attr("last_count", product_count)
    console.log(new_price, all_price)
    calculateTotal()
    $(".total-amount").text(String(all_price.toFixed(2))+pay_icon)
    
       


    var this_count = $("#in_stock option:checked").attr("value")

}
if (Math.abs(all_price.toFixed(2)*100)<Math.abs(parseFloat(max_per).toFixed(2)*100)){
      
      $(".cart-controls").html(`<p class="button button_size-l button_wide" style="cursor: default;">Минимальная сумма заказа՝ `+ max_per +` `+ pay_icon +` </p>`)

    }
  else{
     $(".cart-controls").html(bitton_check)

  }





  })


  $(document).on("click",".make_order_class", function(){
    console.log("order")
    var data = new FormData()
    var url = $(this).attr("url")
    var counter_inputs = $(".counter-input")
    for (var i = 0; i<counter_inputs.length; i++) {
      data.append("cart_pk"+String(i), counter_inputs.eq(i).attr("cpk"))
      data.append("count"+String(i), counter_inputs.eq(i).val())
      console.log(counter_inputs.eq(i).val())
    }
    
    $(".loader-container_alert").css("display", "flex")
     $.ajax({


              
            url: '/api/add_order/',
            method: "POST",
            data: data,
            success: function(data){
                
                window.open("{% url 'accounts:checkout_page' %}");
                $(".loader-container_alert").css("display", "none")
                
                
                

            },
            error: function(data){$(".loader-container_alert").css("display", "none")},
            processData: false,
            contentType: false,
        })
  })
  
  $(".delete_cart_all_product").on("click", function(){
    
    var data = new FormData()
    
     $.ajax({


              
            url: '/api/delete_cart_all_product/',
            method: "POST",
            data: data,
            success: function(data){
                
               $(".cart__area-items").html("")
               $(".total-amount").text("0 "+pay_icon)
               $(".sidebar-size-items span.products_count").text("0")
               all_price=0
               if (Math.abs(all_price.toFixed(2)*100)<Math.abs(parseFloat(max_per).toFixed(2)*100)){
      
      $(".cart-controls").html(`<p class="button button_size-l button_wide" style="cursor: default;">Минимальная сумма заказа՝ `+ max_per +` `+ pay_icon +` </p>`)

    }
  else{
     $(".cart-controls").html(bitton_check)

  }
                
                
                

            },
            error: function(data){},
            processData: false,
            contentType: false,
        })
  })
   $(".js-item-delete").on("click", function(){
    
    var data = new FormData()
    var pk= $(this).attr("data-item_delete")
    data.append("pk", pk)
    var this_price = $(this).attr("counter_price")

    
     $.ajax({


              
            url: '/api/delete_cart_all_product/',
            method: "POST",
            data: data,
            success: function(data){
                
              
               var thiscount = $("#cart-item"+String(pk)).find(".counter-input.input_counters.form-control.form-control_size-s").eq(0).val() 
               var thiscount_size = $("#cart-item"+String(pk)).find(".counter-input.input_sizes.form-control.form-control_size-s").eq(0).val() 
              
               
               $(".products_count").text(parseInt($(".products_count").text())-1)
                $("#cart-item"+String(pk)).remove()
                calculateTotal()
                if (Math.abs(all_price.toFixed(2)*100)<Math.abs(parseFloat(max_per).toFixed(2)*100)){
      
      $(".cart-controls").html(`<p class="button button_size-l button_wide" style="cursor: default;">Минимальная сумма заказа՝ `+ max_per +` `+ pay_icon +` </p>`)

    }
  else{
     $(".cart-controls").html(bitton_check)

  }
               
                

                
                
                

            },
            error: function(data){},
            processData: false,
            contentType: false,
        })
  })
</script>











<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/davidhhh123/jsall@main/style.css" media="all" onload="this.media=&#39;all&#39;">










<link href="https://cdn.jsdelivr.net/gh/davidhhh123/jsall@main/theme.css" rel="stylesheet" type="text/css" onload="document.body.classList.add(&#39;settings_loaded&#39;);">


  <script src="https://cdn.jsdelivr.net/gh/davidhhh123/jsall@main/theme.js" charset="utf-8"></script>

  

</body>
{% endwith %}

</html>
{% endif %}