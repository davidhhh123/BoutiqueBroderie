{% load static %}
{% load i18n %}
{% load mathfilters %}
  {% load rate %}
  {% load all_go %}
 {% get_current_language as LANGUAGE_CODE1 %}
 {% if  LANGUAGE_CODE1 == "hy" %}
{% include 'template_arm/products_all.html' %}
{% elif LANGUAGE_CODE1 == "en" %}
{% include 'template_eng/products_all.html' %}
{% else %}
<!DOCTYPE html>

<html style="--color-btn-bg:#7188D4; --color-btn-bg-is-dark:true; --bg:#FFFFFF; --bg-is-dark:false; --color-text: var(--color-text-dark); --color-text-minor-shade: var(--color-text-dark-minor-shade); --color-text-major-shade: var(--color-text-dark-major-shade); --color-text-half-shade: var(--color-text-dark-half-shade); --color-notice-warning-is-dark:false; --color-notice-success-is-dark:false; --color-notice-error-is-dark:false; --color-notice-info-is-dark:false; --color-form-controls-bg:var(--bg); --color-form-controls-bg-disabled:var(--bg-minor-shade); --color-form-controls-border-color:var(--bg-half-shade); --color-form-controls-color:var(--color-text); --is-editor:false; --vh:568px; --fixed-panels-bottom-offset:0px;"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta data-config="{&quot;money_with_currency_format&quot;:{&quot;delimiter&quot;:&quot; &quot;,&quot;separator&quot;:&quot;.&quot;,&quot;format&quot;:&quot;%n %u&quot;,&quot;unit&quot;:&quot;₽&quot;,&quot;show_price_without_cents&quot;:1},&quot;currency_code&quot;:&quot;RUR&quot;,&quot;default_currency&quot;:{&quot;title&quot;:&quot;Российский рубль&quot;,&quot;code&quot;:&quot;RUR&quot;,&quot;rate&quot;:1.0,&quot;format_string&quot;:&quot;%n %u&quot;,&quot;unit&quot;:&quot;₽&quot;,&quot;price_separator&quot;:&quot;&quot;,&quot;is_default&quot;:true,&quot;price_delimiter&quot;:&quot;&quot;,&quot;show_price_with_delimiter&quot;:true,&quot;show_price_without_cents&quot;:true},&quot;facebook&quot;:{&quot;pixelActive&quot;:false,&quot;currency_code&quot;:&quot;RUB&quot;,&quot;use_variants&quot;:null},&quot;vk&quot;:{&quot;pixel_active&quot;:null,&quot;price_list_id&quot;:null},&quot;new_ya_metrika&quot;:false,&quot;ecommerce_data_container&quot;:&quot;dataLayer&quot;,&quot;common_js_version&quot;:null,&quot;vue_ui_version&quot;:null,&quot;feedback_captcha_enabled&quot;:&quot;1&quot;,&quot;account_id&quot;:1215183,&quot;hide_items_out_of_stock&quot;:false,&quot;forbid_order_over_existing&quot;:false,&quot;minimum_items_price&quot;:null,&quot;enable_comparison&quot;:true,&quot;locale&quot;:&quot;ru&quot;,&quot;client_group&quot;:null,&quot;consent_to_personal_data&quot;:{&quot;active&quot;:false,&quot;obligatory&quot;:true,&quot;description&quot;:&quot;Настоящим подтверждаю, что я ознакомлен и согласен с условиями \u003ca href=&#39;/page/oferta&#39; target=&#39;blank&#39;\u003eоферты и политики конфиденциальности\u003c/a\u003e.&quot;},&quot;recaptcha_key&quot;:&quot;6Lc0T0YUAAAAAAVNiH-_bnSC4E-YHMFTeYOqZyRx&quot;,&quot;checkout_float_order_content_block&quot;:false,&quot;sber_id_app_id&quot;:&quot;5b5a3c11-72e5-4871-8649-4cdbab3ba9a4&quot;,&quot;theme_generation&quot;:4,&quot;quick_checkout_captcha_enabled&quot;:false,&quot;max_order_lines_count&quot;:500}" name="shop-config" content=""><meta name="js-evnvironment" content="production"><meta name="default-locale" content="ru"><meta name="insales-redefined-api-methods" content="[]">
        <!--InsalesCounter -->
        
        <!-- /InsalesCounter -->

    <!-- meta -->
<title>Boutiquebroderie
</title>


<meta name="description" content="boutiquebroderie">
<meta data-config="{&quot;static-versioned&quot;: &quot;1.38&quot;}" name="theme-meta-data" content="">
<meta name="robots" content="index,follow">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="SKYPE_TOOLBAR" content="SKYPE_TOOLBAR_PARSER_COMPATIBLE">
<meta name="format-detection" content="telephone=no">

<!-- canonical url-->

<!-- rss feed-->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://boutiquebroderie.com">
    <meta property="og:title" content="boutiquebroderie">
    



    
    
    


<style type="text/css">
  .co-input-description a:not([class]), .co-menu-link, .co-link, .link, a {
    color: var(--color-accent-text);
    text-decoration: none !important;
}

@media(max-width: 767px){
	.layout__content.main_content{
		padding-bottom: 64px !important;
	}
  .layout__content.main_content.new_or_day_layout{
    padding-bottom: 15px !important;
    padding-top: var(--layout-pt) !important;
  }
	.filter-mobile-controls input.header__search-field1{
		border: 1px solid #808080 !important;
    margin-top: 6px;

	}
  .layout__content.layout__content_new_or_day {
    max-width: var(--layout-content-max-width) !important;
    margin: 0 auto !important;
    padding-top: var(--layout-pt) !important;
    padding-bottom: var(--layout-pb) !important;
    background: var(--bg) !important;
}

  
  .filter-mobile-controls{
      width: 100%;
    max-width: 585px;
    flex-wrap: wrap;
}
.filter-mobile-controls .button.button_size-m{
      margin-top: 150px !important;

}

}
.pagination_select {
    background: var(--color-btn-bg-minor-shade) !important;
    color: var(--color-btn-color) !important;
    border-color: var(--color-btn-bg-minor-shade) !important;
    box-shadow: var(--color-btn-shadow-hover) !important;
    text-decoration: none !important;
}
@media(max-width: 560px){
	.layout__content.main_content{
		padding-bottom: 80px !important;
	}
	

}
.img-ratio.img-ratio_cover.article-photo{
  padding-top: calc(15% / (var(--img-ratio, 1)));
}


.widget-type_system_widget_v4_pagination_1 .show-mobile {
    display: none !important;
}
@media screen and (max-width: 992px){
.widget-type_system_widget_v4_pagination_1 .show-mobile {
    display: flex !important;
     font-size: 1rem;
    padding: 0 1rem;
}
.widget-type_system_widget_v4_pagination_1 .hide-mobile {
    display: none !important;
}

}

@media (max-width: 768px){
.layout.widget-type_system_widget_v4_pagination_1 {
    visibility: visible !important;
    display: flex !important;
}}

</style>


<!-- icons-->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/davidhhh123/jsall@main/icons.css">
<link rel="icon" type="image/png" sizes="16x16" href="https://cdn.jsdelivr.net/gh/davidhhh123/jsall@main/32275806.ico"><style media="screen">
  @supports (content-visibility: hidden) {
    body:not(.settings_loaded) {
      content-visibility: hidden;
    }
  }
  @supports not (content-visibility: hidden) {
    body:not(.settings_loaded) {
      visibility: hidden;
    }
  }
    .multi-column-list {
    column-count: 3; /* Adjust the number of columns as needed */
    column-gap: 20px; /* Adjust the gap between columns as needed */
  }
  
  .multi-column-list li {
    list-style: none;
    margin-bottom: 10px;
  }
</style>

  </head>
  <body data-multi-lang="false" data-theme-template="index" data-sidebar-type="sticky" data-sidebar-position="left" class="settings_loaded">
    <div class="preloader">
      <div class="lds-ellipsis"><div></div><div></div><div></div><div></div></div>
    </div>
    <noscript>
<div class="njs-alert-overlay">
  <div class="njs-alert-wrapper">
    <div class="njs-alert">
      <p></p>
    </div>
  </div>
</div>

</noscript>

    <div class="page_layout page_layout_sticky_left ">
      <header>
      
        <div class="layout widget-type_system_widget_v4_header_1" style="--logo-img:&#39;https://static.insales-cdn.com/files/1/7649/24960481/original/Frame.png&#39;; --logo-max-width:160px; --hide-menu-photo:false; --hide-search:false; --hide-language:false; --hide-compare:true; --hide-personal:false; --hide-favorite:false; --hide-total-price:false; --bage-bg:#7188D4; --bage-bg-is-dark:true; --bage-bg-minor-shade:#8095d9; --bage-bg-minor-shade-is-dark:true; --bage-bg-major-shade:#8ea0dd; --bage-bg-major-shade-is-dark:true; --bage-bg-half-shade:#b8c4ea; --bage-bg-half-shade-is-light:true; --bg-top-panel:#E5EBFF; --bg-top-panel-is-light:true; --bg-top-panel-minor-shade:#e5ebff; --bg-top-panel-minor-shade-is-light:true; --bg-top-panel-major-shade:#e4eaff; --bg-top-panel-major-shade-is-light:true; --bg-top-panel-half-shade:#d9e2ff; --bg-top-panel-half-shade-is-light:true; --menu-grid-list-min-width:220px; --menu-grid-list-row-gap:3rem; --menu-grid-list-column-gap:3rem; --subcollections-items-limit:10; --menu-img-ratio:1; --live-search:true; --header-wide-bg:true; --header-top-pt:0.5vw; --header-top-pb:0.5vw; --header-main-pt:1vw; --header-main-pb:2vw; --header-wide-content:false; --hide-desktop:false; --hide-mobile:false;">
{% include 'layouts/header.html' %}

      
      </header>

      




<!--main-->
<main>
    {% with rate=request|Get_pay_rate %}
        





  
    <div class="layout widget-type_system_widget_v4_page_title_1" style="--layout-wide-bg:true; --layout-pt:1.5vw; --layout-pb:0.5vw; --layout-wide-content:false; --layout-edge:false; --hide-desktop:false; --hide-mobile:true;display: block !important;">

  <div {% if new_products is not None or day_products is not  None %}class="layout__content layout__content_new_or_day" 
  {% else %}class="layout__content " {% endif %}>
    <h1 class="page-headding heading">
  
  {% if day_products is not  None %}
  Товары дня
  
  {% elif Brand is not None %}
  {{Brand.brand}}
  {% elif new_products is not None %}
  Новинки
  {% elif Brands is not None %}
  Продукты брендов

  {% else %}
  
  
  {% endif %}
    
  
  
  
</h1>

  </div>
</div>

{% if new_products is not None or day_products is not None %}
<div class="layout widget-type_system_widget_v4_filter_sort_3" style="--hide-sorting-on-desktop:false; --display-property-color:picture; --hide-sorting-on-mobile:false; --layout-wide-content:false; --layout-edge:false; --hide-count:false; --filter-onchange-submit:true; --layout-wide-bg:false; --layout-pt:1vw; --layout-pb:2vw; --hide-desktop:false; --hide-mobile:false;">
  <div class="layout__content main_content new_or_day_layout">
    








<div class="filter-mobile-controls-top">
  <div class="filter__product-count">
    Товаров <span class="filter__product-count__num">{{products.count}}</span>
  </div>
  
</div>



<form action="#" method="get" class="filter live-submit">
  <div class="filter__mobile-top-panel">
    <button type="button" class="button filter__hide-filter-btn js-hide-filter">
    <span class="icon icon-angle-left"></span>
    </button>
    <button type="button" class="button js-hide-filter-content">
    <span class="icon icon-angle-left"></span>
    </button>
    <div class="filter__mobile-top-panel__name">Фильтр</div>
    <span class="button button_wide filter__reset-btn js-reset-filter">Сбросить</span>
  </div>
  <div class="filter__controls">
    <div class="filter__product-count">
      Товаров <span class="filter__product-count__num">{{products.count}}</span>
    </div>
    <div class="filter__head-reset">
      <button class="button button_wide button_wide__submit submit_filter" type="submit">Применить</button>
     
    </div>
  </div>
  </form></div></div>

{% elif Brand is not None or Brands is not None %}
<div class="layout widget-type_system_widget_v4_filter_sort_3" >
  {% if Brands is not None %}
  {% else %}
     <div class="img-ratio img-ratio_cover article-photo ">
        <div class="img-ratio__inner">
          
          
          

          

          <picture >
            {% if Brand.brand_picture != "" %}
             <source media="(min-width:481px)" data-srcset="{{ Brand.brand_picture.url }}" type="image/webp" class="lazyload image_main_categories entered" data-ll-status="entered" srcset="{{ Brand.brand_picture.url }}">
            <source media="(max-width:480px)" data-srcset="{{ Brand.brand_picture.url }}" type="image/webp" class="lazyload image_main_categories entered" data-ll-status="entered" srcset="{{ Brand.brand_picture.url }}">

            <img data-src="{{ Brand.brand_picture.url }}" class="lazyload image_main_categories entered loaded" alt="" data-ll-status="loaded" src="{{ Brand.brand_picture.url }}" style="width: 150px;height: 150px;object-fit: contain;max-height: 100%;
    max-width: 100%;object-position: 0;">
            
            {% else %}
             <source media="(min-width:481px)" data-srcset="{% static 'images/wcdfxwzc2476qbavpc5ll3q2l2u7d2cj.jpg' %}" type="image/webp" class="lazyload image_main_categories entered" data-ll-status="entered" srcset="{% static 'images/wcdfxwzc2476qbavpc5ll3q2l2u7d2cj.jpg' %}">
            <source media="(max-width:480px)" data-srcset="{% static 'images/wcdfxwzc2476qbavpc5ll3q2l2u7d2cj.jpg' %}" type="image/webp" class="lazyload image_main_categories entered" data-ll-status="entered" srcset="{% static 'images/wcdfxwzc2476qbavpc5ll3q2l2u7d2cj.jpg' %}">

            <img data-src="{% static 'images/wcdfxwzc2476qbavpc5ll3q2l2u7d2cj.jpg' %}" class="lazyload image_main_categories entered loaded" alt="" data-ll-status="loaded" src="{% static 'images/wcdfxwzc2476qbavpc5ll3q2l2u7d2cj.jpg' %}" style="width: 150px;height: 150px;object-fit: contain;">

            {% endif %}
          
          </picture>
        </div>
      </div>
       {% endif %}

   <!--


    <img src="{% static 'images/wcdfxwzc2476qbavpc5ll3q2l2u7d2cj.jpg' %}" width="200" height="200" align="right" style="width: 100%;"> -->
  </div>
  <div class="layout widget-type_system_widget_v4_filter_sort_3" style="--hide-sorting-on-desktop:false; --display-property-color:picture; --hide-sorting-on-mobile:false; --layout-wide-content:false; --layout-edge:false; --hide-count:false; --filter-onchange-submit:true; --layout-wide-bg:false; --layout-pt:1vw; --layout-pb:2vw; --hide-desktop:false; --hide-mobile:false;">
  <div class="layout__content main_content" >
    








<div class="filter-mobile-controls-top">
  <div class="filter__product-count">
    Товаров <span class="filter__product-count__num">{{products.count}}</span>
  </div>
  
</div>
<div class="filter-mobile-controls">
  
  <input type="text" autocomplete="off" class="form-control form-control_size-l header__search-field1" name="q" value="" placeholder="Поиск" data-search-field="" inprocess="false" style="width: 100%;height: 100%;border: 1px solid transparent; ">    <input type="text" autocomplete="off" class="form-control form-control_size-l header__search-field1" name="q" value="" placeholder="Размер" data-search-field="" inprocess="false" style="width: 100%;height: 100%;border: 1px solid transparent; ">
   <input type="text" autocomplete="off" class="form-control form-control_size-l header__search-field1" name="q" value="" placeholder="Цвет" data-search-field="" inprocess="false" style="width: 100%;height: 100%;border: 1px solid transparent; ">

   <a href="#/collection/all?theme_preview=1932632" class="button button_size-m"  style="margin-top: 48px;
    position: absolute;">Поиск</a>
  
</div>


<form action="#" method="get" class="filter live-submit">
  <div class="filter__mobile-top-panel">
    <button type="button" class="button filter__hide-filter-btn js-hide-filter">
    <span class="icon icon-angle-left"></span>
    </button>
    <button type="button" class="button js-hide-filter-content">
    <span class="icon icon-angle-left"></span>
    </button>
    <div class="filter__mobile-top-panel__name">Фильтр</div>
    <span class="button button_wide filter__reset-btn js-reset-filter">Сбросить</span>
  </div>
  <div class="filter__controls">
    <div class="filter__product-count">
      Товаров <span class="filter__product-count__num">{{products.count}}</span>
    </div>
    <div class="filter__head-reset">
      <button class="button button_wide button_wide__submit submit_filter" type="submit">Применить</button>
     
    </div>
  </div>
  <div class="filter__content">
  <button class="button button_wide button_wide__submit" type="submit">Показать</button>
  <div class="filter__items grid-list">
    
    
    
    
    
    
    
    <div class="filter-item filter-item__collection sorting-field">
      <div class="collection-sort">
        
        
        
        
        <div class="collection-order">
         
          <input type="text" autocomplete="off" class="form-control form-control_size-l header__search-field1 search_name_field" name="q" value="" placeholder="Поиск" data-search-field="" inprocess="false" style="width: 100%;height: 100%;border: 1px solid transparent; ">
          
          
          
          
          
          
          
          
          
          </span>
          </button>
         
        </div>
      </div>
    </div>
    




    <div class="filter-item filter-item_price">
      
      <div class="filter-item__head">
         <input type="text" autocomplete="off" class="form-control form-control_size-l header__search-field1 search_size_field" name="q" value="" placeholder="Размер" data-search-field="" inprocess="false" style="width: 100%;height: 100%;border: 1px solid transparent; ">
      </div>
     
    </div>
    <div class="filter-item filter-item_price">
      
      <div class="filter-item__head">
         <input type="text" autocomplete="off" class="form-control form-control_size-l header__search-field1 search_color_field" name="q" value="" placeholder="Цвет" data-search-field="" inprocess="false" style="width: 100%;height: 100%;border: 1px solid transparent; ">
      </div>
     
    </div>
    




    
    
    
    
    
    
   
    <div class="filter-item filter-item_property " style="border-bottom: 1px solid transparent;margin-top: 15px;">
     
        <div href="#" class="button button_size-m button_filter_products" style="margin-top: -18px;">Поиск</div>
     
     
        
     
    </div>
    
  </div>
  
  </div>
  
  
  
</form>


  </div>
</div>
 

  {% else %}
  {% if new_products is  None %}
   <div class="layout widget-type_system_widget_v4_filter_sort_3" >
    <div class="img-ratio img-ratio_cover article-photo ">
        <div class="img-ratio__inner">
          
          
          

           

          <picture >
            {% if category_main.image != "" %}
             <source media="(min-width:481px)" data-srcset="{{ category_main.image.url }}" type="image/webp" class="lazyload image_main_categories entered" data-ll-status="entered" srcset="{{ category_main.image.url }}">
            <source media="(max-width:480px)" data-srcset="{{ category_main.image.url }}" type="image/webp" class="lazyload image_main_categories entered" data-ll-status="entered" srcset="{{ category_main.image.url }}">

            <img data-src="{{ category_main.image.url }}" class="lazyload image_main_categories entered loaded" alt="" data-ll-status="loaded" src="{{ category_main.image.url }}">
            
            {% else %}
             <source media="(min-width:481px)" data-srcset="{% static 'images/wcdfxwzc2476qbavpc5ll3q2l2u7d2cj.jpg' %}" type="image/webp" class="lazyload image_main_categories entered" data-ll-status="entered" srcset="{% static 'images/wcdfxwzc2476qbavpc5ll3q2l2u7d2cj.jpg' %}">
            <source media="(max-width:480px)" data-srcset="{% static 'images/wcdfxwzc2476qbavpc5ll3q2l2u7d2cj.jpg' %}" type="image/webp" class="lazyload image_main_categories entered" data-ll-status="entered" srcset="{% static 'images/wcdfxwzc2476qbavpc5ll3q2l2u7d2cj.jpg' %}">

            <img data-src="{% static 'images/wcdfxwzc2476qbavpc5ll3q2l2u7d2cj.jpg' %}" class="lazyload image_main_categories entered loaded" alt="" data-ll-status="loaded" src="{% static 'images/wcdfxwzc2476qbavpc5ll3q2l2u7d2cj.jpg' %}">

            {% endif %}
           <label for="file_p00" class="" style="width: 40px;height: 40px;position: absolute;margin-left: calc(100% - 50px);margin-top: -46px;z-index: 99;display: block;"><svg viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg" style="fill: white;"><path d="m256 512c-141.164062 0-256-114.835938-256-256s114.835938-256 256-256 256 114.835938 256 256-114.835938 256-256 256zm0-480c-123.519531 0-224 100.480469-224 224s100.480469 224 224 224 224-100.480469 224-224-100.480469-224-224-224zm0 0"></path><path d="m368 272h-224c-8.832031 0-16-7.167969-16-16s7.167969-16 16-16h224c8.832031 0 16 7.167969 16 16s-7.167969 16-16 16zm0 0"></path><path d="m256 384c-8.832031 0-16-7.167969-16-16v-224c0-8.832031 7.167969-16 16-16s16 7.167969 16 16v224c0 8.832031-7.167969 16-16 16zm0 0"></path></svg>
                                            <span><input type="file" name="file" style="display: none;" id="file_p00" pk="{{ category_main.pk }}"></span>

                                        </label>
          </picture>
          
        </div>
      </div>
   </div>
  

<div class="layout widget-type_system_widget_v4_filter_sort_3">
  

  <table>
<tbody><tr>
  <td style="width:50%;vertical-align:top;padding-top: 20px;">
  
<ul class="multi-column-list">
   {% if category_choeses %}
    {% for category in category_choeses %}
     <li><a class="standard" href="{% url 'accounts:shop_products_category' category.category_id_main  %}">{{category.name}} ({{category.products_count}})</a>
   </li>
    {% endfor %}
    {% else %}
    {% endif %}
  
</ul>
  </td>
  
</tr>
</tbody></table>
  
</div>
{% else %}



          {% endif %}
  
    <div class="layout widget-type_system_widget_v4_filter_sort_3" style="--hide-sorting-on-desktop:false; --display-property-color:picture; --hide-sorting-on-mobile:false; --layout-wide-content:false; --layout-edge:false; --hide-count:false; --filter-onchange-submit:true; --layout-wide-bg:false; --layout-pt:1vw; --layout-pb:2vw; --hide-desktop:false; --hide-mobile:false;">
  <div class="layout__content main_content" >
    








<div class="filter-mobile-controls-top">
  <div class="filter__product-count">
    Товаров <span class="filter__product-count__num">{{products.count}}</span>
  </div>
  
</div>
<div class="filter-mobile-controls">
  
  <input type="text" autocomplete="off" class="form-control form-control_size-l header__search-field1" name="q" value="" placeholder="Поиск" data-search-field="" inprocess="false" style="width: 100%;height: 100%;border: 1px solid transparent; ">    <input type="text" autocomplete="off" class="form-control form-control_size-l header__search-field1" name="q" value="" placeholder="Размер" data-search-field="" inprocess="false" style="width: 100%;height: 100%;border: 1px solid transparent; ">
   <input type="text" autocomplete="off" class="form-control form-control_size-l header__search-field1" name="q" value="" placeholder="Цвет" data-search-field="" inprocess="false" style="width: 100%;height: 100%;border: 1px solid transparent; ">

   <a href="#/collection/all?theme_preview=1932632" class="button button_size-m"  style="margin-top: 48px;
    position: absolute;">Поиск</a>
  
</div>


<form action="#" method="get" class="filter live-submit">
  <div class="filter__mobile-top-panel">
    <button type="button" class="button filter__hide-filter-btn js-hide-filter">
    <span class="icon icon-angle-left"></span>
    </button>
    <button type="button" class="button js-hide-filter-content">
    <span class="icon icon-angle-left"></span>
    </button>
    <div class="filter__mobile-top-panel__name">Фильтр</div>
    <span class="button button_wide filter__reset-btn js-reset-filter">Сбросить</span>
  </div>
  <div class="filter__controls">
    <div class="filter__product-count">
      Товаров <span class="filter__product-count__num">{{products.count}}</span>
    </div>
    <div class="filter__head-reset">
      <button class="button button_wide button_wide__submit submit_filter" type="submit">Применить</button>
     
    </div>
  </div>
  <div class="filter__content">
  <button class="button button_wide button_wide__submit" type="submit">Показать</button>
  <div class="filter__items grid-list">
    
    
    
    
    
    
    
    <div class="filter-item filter-item__collection sorting-field">
      <div class="collection-sort">
        
        
        
        
        <div class="collection-order">
         
          <input type="text" autocomplete="off" class="form-control form-control_size-l header__search-field1 search_name_field" name="q" value="" placeholder="Поиск" data-search-field="" inprocess="false" style="width: 100%;height: 100%;border: 1px solid transparent; ">
          
          
          
          
          
          
          
          
          
          </span>
          </button>
         
        </div>
      </div>
    </div>
    




    <div class="filter-item filter-item_price">
      
      <div class="filter-item__head">
         <input type="text" autocomplete="off" class="form-control form-control_size-l header__search-field1 search_size_field" name="q" value="" placeholder="Размер" data-search-field="" inprocess="false" style="width: 100%;height: 100%;border: 1px solid transparent; ">
      </div>
     
    </div>
    <div class="filter-item filter-item_price">
      
      <div class="filter-item__head">
         <input type="text" autocomplete="off" class="form-control form-control_size-l header__search-field1 search_color_field" name="q" value="" placeholder="Цвет" data-search-field="" inprocess="false" style="width: 100%;height: 100%;border: 1px solid transparent; ">
      </div>
     
    </div>
    




    
    
    
    
    
    
   
    <div class="filter-item filter-item_property " style="border-bottom: 1px solid transparent;margin-top: 15px;">
     
        <div href="#" class="button button_size-m button_filter_products" style="margin-top: -18px;">Поиск</div>
     
     
        
     
    </div>
    
  </div>
  
  </div>
  
  
  
</form>


  </div>
</div>
  {% endif %}
    <div class="layout widget-type_system_widget_v4_catalog_3" style="--hide-description:true; --catalog-grid-list-min-width:200px; --img-ratio:1; --border-radius:8px; --img-fit:cover; --product-desc-limit:10; --product-background:#F2F5FF; --product-background-is-light:true; --product-background-minor-shade:#eff3ff; --product-background-minor-shade-is-light:true; --product-background-major-shade:#eff2ff; --product-background-major-shade-is-light:true; --product-background-half-shade:#e8edff; --product-background-half-shade-is-light:true; --rounding-button:true; --product-info-align:left; --switch-img-on-hover:false; --product-info-accent:price; --sticker-font-size:0.7rem; --layout-wide-bg:true; --catalog-grid-list-row-gap:3.5rem; --catalog-grid-list-column-gap:2rem; --layout-pt:0.5vw; --layout-pb:2vw; --layout-wide-content:false; --layout-edge:false; --hide-desktop:false; --hide-mobile:false; --catalog-grid-list-min-width-mobile:130px; --catalog-grid-list-row-gap-mobile:3rem; --catalog-grid-list-column-gap-mobile:1rem; --display-property-color:text; --hide-mobile-modal-variants:false;">
  
  <div class="layout__content">
    



<div class="catalog">
  <div class="grid-list catalog-list" data-collection-infinity="">
   

    {% for product in products %}
    
    <div class="product-preview-elem">
      <form action="/cart_items" method="post" data-product-id="336489960" class="product-preview is-zero-count-shown without-old-price without-sku is-available">
      <div class="product-preview__content">
        <div class="product-preview__area-photo">
          <div class="product-preview__photo">
            
              <span class="button button_size-s favorites_btn favorites-not-added" data-ui-favorites-trigger="336489960">
                <span class="btn-icon icon-favorites-o"></span>
                <span class="btn-icon icon-favorites-f"></span>
              </span>
            
            <div class="img-ratio img-fit">
              <div class="img-ratio__inner">
                
                <a href="{% url 'accounts:product_detalis_view' product.pk %}">
                  
                  
                  
                  
                  
                  
                  
                  
                  <picture>
                    <source media="(min-width:768px)" data-srcset="{{ product.avatar_p.url }}" type="image/webp" class="lazyload" srcset="{{ product.avatar_p.url }}">
                    <source media="(max-width:767px)" data-srcset="{{ product.avatar_p.url }}" type="image/webp" class="lazyload" srcset="{{ product.avatar_p.url }}">
                    <img data-src="{{ product.avatar_p.url }}" class="lazyload loaded" alt="Костюм" loading="lazy" src="{{ product.avatar_p.url }}" data-ll-status="loaded">
                  </picture>
                  
                  
                </a>
              </div>
            </div>
            <div class="product-preview__available">
              
              В наличии
              
            </div>

            <div class="stickers">
              
              <div class="sticker sticker-sale" data-product-card-sale-value="" data-sticker-title="sticker-sale">{% if product.sale > 0 %}-{{product.sale}} %{% else %}{% endif %}</div>
              <div class="sticker sticker-preorder" data-sticker-title="sticker-preorder">Предзаказ</div>
            </div>
          </div>
        </div>
        <div class="product-preview__area-title">
          <div class="product-preview__title">
            <a href="{% url 'accounts:product_detalis_view' product.pk %}">{{ product.name_ru }}</a>
          </div>
        </div>
        <div class="product-preview__area-description">
          
          <div class="product-preview__description">
           
          </div>
          
        </div>
        <div class="product-preview__area-bottom">
          <div class="product-preview__buy">
            
            <div class="product-preview__price">











{% if product.price %}
{% if product.sale_price  %}
               <span class="product-preview__price-old">{{product.price|div:rate.0|floatformat:2 }}&nbsp;{% if rate.1 == 'ARM' %}֏{% elif rate.1 == "ENG" %}${% elif rate.1 == "EUR" %}€{% else %}₽{% endif %}</span>
              
              <span class="product-preview__price-cur">{{product.sale_price|div:rate.0|floatformat:2 }}&nbsp;{% if rate.1 == 'ARM' %}֏{% elif rate.1 == "ENG" %}${% elif rate.1 == "EUR" %}€{% else %}₽{% endif %}</span>
               
              {% else %}
              <span class="product-preview__price-cur">{{product.price|div:rate.0|floatformat:2 }}&nbsp;{% if rate.1 == 'ARM' %}֏{% elif rate.1 == "ENG" %}${% elif rate.1 == "EUR" %}€{% else %}₽{% endif %}</span>
             
              {% endif %}
{% elif product.price_pcs %}
 {% if product.sale_price_pcs  %}
               <span class="product-preview__price-old">{{product.price_pcs|div:rate.0|floatformat:2 }}&nbsp;{% if rate.1 == 'ARM' %}֏{% elif rate.1 == "ENG" %}${% elif rate.1 == "EUR" %}€{% else %}₽{% endif %}</span>
              
              <span class="product-preview__price-cur">{{product.sale_price_pcs|div:rate.0|floatformat:2 }}&nbsp;{% if rate.1 == 'ARM' %}֏{% elif rate.1 == "ENG" %}${% elif rate.1 == "EUR" %}€{% else %}₽{% endif %}</span>
               
              {% else %}
              <span class="product-preview__price-cur">{{product.price_pcs|div:rate.0|floatformat:2 }}&nbsp;{% if rate.1 == 'ARM' %}֏{% elif rate.1 == "ENG" %}${% elif rate.1 == "EUR" %}€{% else %}₽{% endif %}</span>
             
              {% endif %}
{% elif product.price_size %}
{% if product.sale_price_size  %}
               <span class="product-preview__price-old">{{product.price_size|div:rate.0|floatformat:2 }}&nbsp;{% if rate.1 == 'ARM' %}֏{% elif rate.1 == "ENG" %}${% elif rate.1 == "EUR" %}€{% else %}₽{% endif %}</span>
              
              <span class="product-preview__price-cur">{{product.sale_price_size|div:rate.0|floatformat:2 }}&nbsp;{% if rate.1 == 'ARM' %}֏{% elif rate.1 == "ENG" %}${% elif rate.1 == "EUR" %}€{% else %}₽{% endif %}</span>
               
              {% else %}
              <span class="product-preview__price-cur">{{product.price_size|div:rate.0|floatformat:2 }}&nbsp;{% if rate.1 == 'ARM' %}֏{% elif rate.1 == "ENG" %}${% elif rate.1 == "EUR" %}€{% else %}₽{% endif %}</span>
             
              {% endif %}
{% else %}
{% if product.counter_props.all %}
{% with firstname=product.count|checkcounters:product.product.pk %}
    {% if firstname is not None %}
     <span class="product-preview__price-cur">{{firstname|div:rate.0|floatformat:2}}&nbsp;{% if rate.1 == 'ARM' %}֏{% elif rate.1 == "ENG" %}${% elif rate.1 == "EUR" %}€{% else %}₽{% endif %}</span>
   

             
    {% else %}
    <span class="product-preview__price-cur">{{product.price|div:rate.0|floatformat:2}}&nbsp;{% if rate.1 == 'ARM' %}֏{% elif rate.1 == "ENG" %}${% elif rate.1 == "EUR" %}€{% else %}₽{% endif %}</span>
      
             
    {% endif %}
  {% endwith %}
{% else %}
<span class="product-preview__price-cur">{{product.price|div:rate.0|floatformat:2}}&nbsp;{% if rate.1 == 'ARM' %}֏{% elif rate.1 == "ENG" %}${% elif rate.1 == "EUR" %}€{% else %}₽{% endif %}</span>
      
{% endif %}
{% endif %}

              
              
              
              
             
              
            </div>
            <div class="product-preview__controls">
              <input type="hidden" name="quantity" value="1">
              <input type="hidden" name="variant_id" value="573208033">
              
              
              <div class="add-cart-counter" data-add-cart-counter="" data-add-cart-counter-max-quantity="null" data-add-cart-counter-is-ready="">
               {% if product.price_pcs or product.price_size %}
 <a href="{% url 'accounts:product_detalis_view' product.pk %}" class="button add-cart-counter__btn "  data-add-cart-counter-btn="">
<span class="add-cart-counter__btn-icon icon-cart"></span>
                </a>
{% else %}
 <button type="button" class="button add-cart-counter__btn add_cart_btn_counter_ind" pk = "{{product.pk}}"  {% if product.price %}
ind="count"

{% else %}
{% if product.counter_props.all %}
ind="counter"
{% else %}
ind="count"
{% endif %}
{% endif %} data-add-cart-counter-btn="">
<span class="add-cart-counter__btn-icon icon-cart"></span>
                </button>
{% endif %}
                <div class="add-cart-counter__controls">
                  <button data-add-cart-counter-plus="" class="button add-cart-counter__controls-btn" type="button">
                  <span data-add-cart-counter-count="" class="add-cart-counter__detail-count">0</span>
                  + 1 шт
                  </button>
                </div>
              </div>
              
              
            </div>
          </div>
        </div>
      </div>
      </form>
     
    </div>
    
    {% endfor %}

    
    
    
    
  </div>
</div>











  </div>
</div>
   <div class="layout widget-type_system_widget_v4_pagination_1" style="--align:center; --layout-wide-bg:false; --layout-pt:3vw; --layout-pb:3vw; --layout-wide-content:false; --layout-edge:false; --hide-desktop:false; --hide-mobile:false;">
  <div class="layout__content">
    
<div class="pagination">
  <a  href="1" class="button button_size-s pagination-prev ajax-pag hide-mobile">предыдущий</a>
    <a href="1" class="button button_size-s show-mobile ajax-pag pagination-prev icon icon-arrow-left"></a>
  <div class="pagination-items next pagination_products">
     {% for i in page_range %}
     {% if forloop.counter < 5 %}

      <a href="{{i}}" {% if i == 1 %} class="button button_size-s ajax-pag pagination-link pagination_select"{% else %} class="button button_size-s ajax-pag pagination-link" {% endif %}>
       {{i}}
    </a>
    {% else %}
    {% endif %}
    {% endfor %}
                                
    
    
  </div>
   <a href="2" class="button button_size-s pagination-next hide-mobile ajax-pag">следующий</a>
    <a href="2" class="button button_size-s pagination-next  ajax-pag icon icon-arrow-right show-mobile"></a>
  
  
  
</div>


  </div>
</div>
  
    
  



      </main>
      {% endwith %}

<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/davidhhh123/jsall@main/shop_products.css" rel="stylesheet" type="text/css">



      
     {% include 'layouts/aside.html' %}
      
{% include 'layouts/footer.html' %}
    </div>
    
    <div data-fixed-panels="bottom">
      
      
    </div>


  <script src="https://cdn.jsdelivr.net/gh/davidhhh123/jsall@main/my-layout.js"></script>
  <link href="https://cdn.jsdelivr.net/gh/davidhhh123/jsall@main/core-css.css" rel="stylesheet" type="text/css">
  
  <script src="https://cdn.jsdelivr.net/gh/davidhhh123/jsall@main/jquery.min.js"></script>

  <script src="https://cdn.jsdelivr.net/gh/davidhhh123/jsall@main/jquery.cut-list.js"></script>
  <link href="https://cdn.jsdelivr.net/gh/davidhhh123/jsall@main/jquery.cut-list.css" rel="stylesheet" type="text/css">
  <script src="https://cdn.jsdelivr.net/gh/davidhhh123/jsall@main/microAlert.js"></script>
  <link href="https://cdn.jsdelivr.net/gh/davidhhh123/jsall@main/microAlert.css" rel="stylesheet" type="text/css"><script src="https://cdn.jsdelivr.net/gh/davidhhh123/jsall@main/bodyScrollLock.min.js"></script>
  <link href="https://cdn.jsdelivr.net/gh/davidhhh123/jsall@main/main.css" rel="stylesheet" type="text/css">
  


<script>
  try {
  let widget = '.widget-type_system_widget_v4_header_1';
  let $widget = $('.widget-type_system_widget_v4_header_1');
  /* eslint-disable linebreak-style */
var products_template=` <div class="product-preview-elem">
      <form action="/cart_items" method="post" data-product-id="336489960" class="product-preview is-zero-count-shown without-old-price without-sku is-available">
      <div class="product-preview__content">
        <div class="product-preview__area-photo">
          <div class="product-preview__photo">
            
              <span class="button button_size-s favorites_btn favorites-not-added" data-ui-favorites-trigger="336489960">
                <span class="btn-icon icon-favorites-o"></span>
                <span class="btn-icon icon-favorites-f"></span>
              </span>
            
            <div class="img-ratio img-fit">
              <div class="img-ratio__inner">
                
                <a href="/shop/products/<pk_product>">
                  
                  
                  
                  
                  
                  
                  
                  
                  <picture>
                    <source media="(min-width:768px)" data-srcset="<avatar_p>" type="image/webp" class="lazyload" srcset="<avatar_p>">
                    <source media="(max-width:767px)" data-srcset="<avatar_p>" type="image/webp" class="lazyload" srcset="<avatar_p>">
                    <img data-src="<avatar_p>" class="lazyload loaded" alt="Костюм" loading="lazy" src="<avatar_p>" data-ll-status="loaded">
                  </picture>
                  
                  
                </a>
              </div>
            </div>
            <div class="product-preview__available">
              
              В наличии
              
            </div>

            <div class="stickers">
              
              <div class="sticker sticker-sale" data-product-card-sale-value="" data-sticker-title="sticker-sale"><sales_products></div>
              <div class="sticker sticker-preorder" data-sticker-title="sticker-preorder">Предзаказ</div>
            </div>
          </div>
        </div>
        <div class="product-preview__area-title">
          <div class="product-preview__title">
            <a href="/shop/products/<pk_product>"><product_name></a>
          </div>
        </div>
        <div class="product-preview__area-description">
          
          <div class="product-preview__description">
            Карнавальный костюм - это замечательная возможность окунуться в атмосферу волшебства...
          </div>
          
        </div>
        <div class="product-preview__area-bottom">
          <div class="product-preview__buy">
            
            <div class="product-preview__price">
            <product_price>


  

              
              
              
              
             
              
            </div>
            <div class="product-preview__controls">
              <input type="hidden" name="quantity" value="1">
              <input type="hidden" name="variant_id" value="573208033">
              
              
              <div class="add-cart-counter" data-add-cart-counter="" data-add-cart-counter-max-quantity="null" data-add-cart-counter-is-ready="">
                <button type="button" ind="<indicator>" pk="<pk_product>" class="button add-cart-counter__btn add_cart_btn_counter_ind" data-add-cart-counter-btn="">
                <span class="add-cart-counter__btn-icon icon-cart"></span>
                </button>
                <div class="add-cart-counter__controls">
                  <button data-add-cart-counter-plus="" class="button add-cart-counter__controls-btn" type="button">
                  <span data-add-cart-counter-count="" class="add-cart-counter__detail-count">0</span>
                  + 1 шт
                  </button>
                </div>
              </div>
              
              
            </div>
          </div>
        </div>
      </div>
      </form>
     
    </div>
    `
    var pagination_url = ``
    {% if day_products is not  None %}
    pagination_url = "{% url 'accounts:day_of_products' %}"
  {% elif Brand is not None %}
  pagination_url = "{% url 'accounts:brand_products' Brand.pk %}"
  {% elif new_products is not None %}
  pagination_url = "{% url 'accounts:new_products' %}"
  {% elif Brands is not None %}
 pagination_url = "{% url 'accounts:all_brands_product' %}" 
  {% else %}
  pagination_url = "{% url 'accounts:shop_products_category' categoryid  %}"
  {% endif %}

    
    $(document).on("click",".ajax-pag",function(event){
        event.preventDefault();
        var page_n = $(this).attr('href');
        var _this = $(this)
        var search_name = $(".search_name_field")

        var color_name = $(".search_color_field").val()

        var size_name = $(".search_size_field").val()
        var data  = new FormData()
        console.log(search_name.val(), "search_name")

    if (search_name != undefined){
      var ajax_data = {    
                page_n : page_n,
                search_text:search_name.val(),
                csrfmiddlewaretoken: '{{ csrf_token }}',
            }
      

    }
    else{
      var ajax_data = {    
                page_n : page_n,
                
                csrfmiddlewaretoken: '{{ csrf_token }}',
            }
    }
        
        

        $.ajax({
            type: "POST",
            url: pagination_url, 
            data : ajax_data,
            success: function (response) {
                $('.grid-list.catalog-list').html('')
                console.log("aaaaaa",response.page_range, page_n)
                var pagination_template= ``

                if (response.page_range.length>0){
                  $(".ajax-pag.pagination-next").attr("href", parseInt(page_n)+1)
                   $(".ajax-pag.pagination-prev").attr("href",parseInt(page_n)-1)
                  for (var pag_range=0;pag_range<response.page_range.length;pag_range++){

                    if (pag_range==1){

                      pagination_template+=`<a href="`+ response.page_range[pag_range] +`" class="button button_size-s ajax-pag pagination-link pagination_select">
       `+ response.page_range[pag_range] +`
    </a>`

                    }
                    else{
                      pagination_template+=`<a href="`+ response.page_range[pag_range] +`" class="button button_size-s ajax-pag pagination-link ">
       `+ response.page_range[pag_range] +`
    </a>`

                    }
                    

                  }
                 
                   $(".pagination_products").html(``)
                  
                  $(".pagination_products").append(pagination_template)
                }
                 else{
                  $(".ajax-pag").removeClass("pagination_select")
                    _this.addClass("pagination_select")

                  }
                  if (parseInt(page_n)==1){
                    $(".ajax-pag").removeClass("pagination_select")
                     $(`.ajax-pag[href="1"]`).addClass("pagination_select")
                     $(".ajax-pag.pagination-next").attr("href", parseInt(page_n)+1)
                     $(".ajax-pag.pagination-prev").attr("href", 1)
                  
                }
                console.log(response.page_range, "page_range")
                $.each(response.results, function(i, result) {
                  console.log(result)
                 
                  var template = products_template.replace("<product_name>", result.name_ru)
                  template = template.replaceAll("<avatar_p>", result.avatar_p)
                  var price = result['price']
                  var price_sale = undefined
                  var indicator = "count"
                  if (result['sale_price'] != 0){
          price_sale = result['sale_price']

        }

        if (parseInt(result['price_pcs']) != 0){
          price = result['price_pcs']
          if (result['sale_price_pcs']){
            price_sale = result['sale_price_pcs']

          }
          indicator = "size"
          

        }
        else if (parseInt(result['price_size']) != 0){
          price = result['price_size']
          if (result['sale_price_size']){
            price_sale = result['sale_price_size']

          }
          indicator = "size"

        }
        else if (result['counter_props'].length > 0){
          var count_er = parseInt(result['counter_props'][0]['counter_prop'])
          var counter_props = result['counter_props'][0]
          indicator="counter"
          
          for (var i_counter =0;i_counter<result['counter_props'].length;i_counter++){
            if (parseInt(result['counter_props'][i_counter]['counter_prop'])<count_er){
              count_er = parseInt(result['counter_props'][i_counter]['counter_prop'])
              counter_props =  result['counter_props'][i_counter]
            }

          }
          price = counter_props["counter_price"]
          if (counter_props["counter_price_sale"] != 0){
            price_sale = counter_props["counter_price_sale"]

          }
          
         
          
        }
        else{

        }

        
                 if (price_sale!=undefined){

           template = template.replace("<product_price>", `<span class="product-preview__price-old">`+ (parseFloat(price)/parseFloat(pay_rates_search)).toFixed(2)  + ` `+ pay_icon_search  +`</span><span class="product-preview__price-cur"> `+ (parseFloat(price_sale)/parseFloat(pay_rates_search)).toFixed(2) +` `+ pay_icon_search +`</span>`)
            template = template.replace("<sales_products>","-"+result["sale"]+"%")
           

        }
        else{
           template = template.replace("<product_price>", `<span class="product-preview__price-cur"> `+ (parseFloat(price)/parseFloat(pay_rates_search)).toFixed(2) +` `+ pay_icon_search +`</span>`)
           template = template.replace("<sales_products>","")
        }
        template = template.replace("<indicator>", indicator) 
              template = template.replaceAll("<pk_product>", result["id"]) 

               

                  
                  
                $('.grid-list.catalog-list').append(template)
                  var element = document.getElementsByClassName("widget-type_system_widget_v4_catalog_3")[0];

                  element.scrollIntoView();
                  //var element = document.getElementById('targetElement');
    var headerOffset = 120;
    var elementPosition = element.getBoundingClientRect().top;
    var offsetPosition = elementPosition + window.pageYOffset - headerOffset;
  
    window.scrollTo({
         top: offsetPosition,
         behavior: "smooth"
    });
                  

               });
            },
            error: function () {
                
            }
        }); 
    });    


    

  
    
  $(".button_filter_products").on("click", function(){
    var search_name = $(".search_name_field").val()
    var color_name = $(".search_color_field").val()

    var size_name = $(".search_size_field").val()
    var data  = new FormData()
   
    data.append("search_text", search_name)
    if (color_name.length > 0){
      data.append("search_color", color_name)

    }
    if (size_name.length > 0){
      data.append("search_size", size_name)
      
    }
    $.ajax({


              
            url: pagination_url,
            method: "POST",
            data: data,
            success: function(response){
                

                    
                   
                  $(".grid-list.catalog-list").html("")
                  var page_n = 1
                  var pagination_template= ``

                   

                  if (response.page_range.length>0){
                  $(".ajax-pag.pagination-next").attr("href", parseInt(page_n)+1)
                   $(".ajax-pag.pagination-prev").attr("href",parseInt(page_n)-1)
                  for (var pag_range=0;pag_range<response.page_range.length;pag_range++){

                    if (pag_range==1){


                      pagination_template+=`<a href="`+ response.page_range[pag_range] +`" class="button button_size-s ajax-pag pagination-link pagination_select">
       `+ response.page_range[pag_range] +`
    </a>`

                    }
                    else{
                      pagination_template+=`<a href="`+ response.page_range[pag_range] +`" class="button button_size-s ajax-pag pagination-link ">
       `+ response.page_range[pag_range] +`
    </a>`

                    }
                    console.log(pagination_template, "pagination_template")
                    

                  }
                 
                   $(".pagination_products").html(``)
                  
                  $(".pagination_products").append(pagination_template)
                }
                 else{
                  $(".ajax-pag").removeClass("pagination_select")
                    _this.addClass("pagination_select")

                  }
                  if (parseInt(page_n)==1){
                    $(".ajax-pag").removeClass("pagination_select")
                     $(`.ajax-pag[href="1"]`).addClass("pagination_select")
                     $(".ajax-pag.pagination-next").attr("href", parseInt(page_n)+1)
                     $(".ajax-pag.pagination-prev").attr("href", 1)
                  
                }
                console.log(response.page_range, "page_range")
                $.each(response.results, function(i, result) {
                  console.log(result)
                 
                  var template = products_template.replace("<product_name>", result.name_ru)
                  template = template.replaceAll("<avatar_p>", result.avatar_p)
                  var price = result['price']
                  var price_sale = undefined
                  var indicator = "count"
                  if (result['sale_price'] != 0){
          price_sale = result['sale_price']

        }

        if (parseInt(result['price_pcs']) != 0){
          price = result['price_pcs']
          if (result['sale_price_pcs']){
            price_sale = result['sale_price_pcs']

          }
          indicator= "size"
          

        }
        else if (parseInt(result['price_size']) != 0){
          price = result['price_size']
          if (result['sale_price_size']){
            price_sale = result['sale_price_size']

          }
          indicator= "size"

        }
        else if (result['counter_props'].length > 0){
          var count_er = parseInt(result['counter_props'][0]['counter_prop'])
          var counter_props = result['counter_props'][0]
          indicator = "counter"
          for (var i_counter =0;i_counter<result['counter_props'].length;i_counter++){
            if (parseInt(result['counter_props'][i_counter]['counter_prop'])<count_er){
              count_er = parseInt(result['counter_props'][i_counter]['counter_prop'])
              counter_props =  result['counter_props'][i_counter]
            }

          }
          price = counter_props["counter_price"]
          if (counter_props["counter_price_sale"] != 0){
            price_sale = counter_props["counter_price_sale"]

          }
          
         
          
        }
        else{

        }

        
                 if (price_sale!=undefined){
           template = template.replace("<product_price>", `<span class="product-preview__price-old">`+ (parseFloat(price_sale)/parseFloat(pay_rates_search)).toFixed(2)  + ` `+ pay_icon_search  +`</span><span class="product-preview__price-cur"> `+ (parseFloat(price)/parseFloat(pay_rates_search)).toFixed(2) +` `+ pay_icon_search +`</span>`)

        }
        else{
           template = template.replace("<product_price>", `<span class="product-preview__price-cur"> `+ (parseFloat(price)/parseFloat(pay_rates_search)).toFixed(2) +` `+ pay_icon_search +`</span>`)
        }
               
 template = template.replace("<indicator>", indicator) 
              template = template.replaceAll("<pk_product>", result["id"]) 
                  
                  
                $('.grid-list.catalog-list').append(template)
                  var element = document.getElementsByClassName("widget-type_system_widget_v4_catalog_3")[0];

                  element.scrollIntoView();
                  //var element = document.getElementById('targetElement');
    var headerOffset = 120;
    var elementPosition = element.getBoundingClientRect().top;
    var offsetPosition = elementPosition + window.pageYOffset - headerOffset;
  
    window.scrollTo({
         top: offsetPosition,
         behavior: "smooth"
    });
                  

               });
            },
            error: function () {},
            processData: false,
            contentType: false,
        })


  })
function image_load(file, pk){
    var data = new FormData()
    data.append("image", file)
   
    data.append("pk", pk)
     $.ajax({


              
            url: '/api/add_images_for_categories/',
            method: "POST",
            data: data,
            success: function(data){
                if (data.success!=0){
                   var reader  = new FileReader();

                    reader.onloadend = function () {
                        $("img.image_main_categories").attr("src", reader.result)
                        $("img.image_main_categories").attr("data-src", reader.result)
                        $("source.image_main_categories").attr("data-srcset", reader.result)
                         $("source.image_main_categories").attr("srcset", reader.result)



                    }
                    reader.readAsDataURL(file);
                    
                }

                    
                   
                

             
               
                  
                

            },
            error: function(daa){},
            processData: false,
            contentType: false,
        })

}
$("#file_p00").on("change", function(){
  var file = this.files[0]
  var pk = $(this).attr("pk")
  image_load(file,pk)
})

$(function() {
  function getWidget(item) {
    return item.closest('.layout');
  }


  var mobilePoint = 768;
  $(document).ready(function() {
   

    if ($(window).width() >= mobilePoint) {
      $(widget).find(".js-cut-list").cutList({
        moreBtnTitle: '<span class="icon-ellipsis-h"></span>',
        alwaysVisibleElem: '.is-current'
      });
    }

    $(window).on('load', function() {
      $(widget).find(".js-cut-list").resize();
    });

    $(window).on('resize', function() {
      let collections_menu = $(widget).find(".header__collections");
      let collections_menu_content = collections_menu.find(".header__collections-content");

      if (collections_menu.is(".is-show")) {
        let max_height = $(window).height() - collections_menu.offset().top - 20;
        collections_menu_content.css("maxHeight", max_height);
      }
    });

    if ($(widget).find(".header__collections .is-current").length) {
      $(widget).find(".header__collections .is-current").addClass("is-show-mobile");
      $(widget).find(".header__collections > .header__collections-item.is-current").addClass("is-show");
    }

    $(widget).find(".js-show-header-collections").on("click", function() {
      let thisWidget = getWidget($(this));

      thisWidget.each(function(index, el) {
        let lazyLoadCollectionList = new LazyLoad({
          container: $(el).get(0),
          elements_selector: '.lazyload'
        });

        try {
          lazyLoadCollectionList.loadAll()
        } catch (e) {
          console.log(e)
        }
      });

      let collections_menu = thisWidget.find(".header__collections");
      let collections_menu_content = collections_menu.find(".header__collections-content");

      if (collections_menu.is(".is-show")) {
        collections_menu.removeClass("is-show");
      } else {
        collections_menu.addClass("is-show");

        let max_height = $(window).height() - collections_menu.offset().top - 20;
        collections_menu_content.css("maxHeight", max_height);
      }

      $(this).toggleClass("is-active");
      thisWidget.find(".header__collections-overlay").toggleClass("is-show");
    });

    $(document).on("click", function(event) {
      let thisWidget = getWidget($(event.target).closest('.layout'));

      if ($(event.target).closest(".js-show-header-collections").length || $(event.target).closest(".header__collections-content").length) {
        return;
      }

      thisWidget.find(".header__collections.is-show").removeClass("is-show");
      thisWidget.find(".header__collections-overlay.is-show").removeClass("is-show");
      thisWidget.find(".js-show-header-collections").removeClass("is-active");
    });

    $(widget).find(".js-show-mobile-submenu").on("click", function() {
      $(this).parents(".header__collections-item:first").toggleClass("is-show-mobile");
    });

    $(widget).find(".js-show-mobile-menu").on("click", function() {
      let thisWidget = getWidget($(event.target).closest('.layout'));

      thisWidget.find(".header").addClass("is-show-mobile");
    });

    $(widget).find(".js-hide-mobile-menu").on("click", function() {
      let thisWidget = getWidget($(event.target).closest('.layout'));

      thisWidget.find(".header").removeClass("is-show-mobile");
    });

    $(widget).find(".js-show-mobile-search").on("click", function() {
      $(this).parents(".header__search").toggleClass("is-show-mobile").find(".header__search-field").focus();
    });

    $(widget).find(".js-show-more-subcollections").on("click", function() {
      let thisWidget = getWidget($(this));

      let collections_menu = thisWidget.find(".header__collections-menu");
      let limit = collections_menu.attr("data-subcollections-items-limit");
      let collection_elem = $(this).parents(".header__collections-item.is-level-1");

      if ($(this).is(".is-active")) {
        $(this).removeClass("is-active");
        collection_elem.find('.header__collections-submenu .header__collections-item:nth-child(n+' + (parseInt(limit) + 1) + ')').addClass("is-hide");
      } else {
        $(this).addClass("is-active");
        collection_elem.find(".header__collections-submenu .header__collections-item").removeClass("is-hide");
      }
    });
  });

  

  function configureSubcollectionsItemsLimit(limit) {
    let collections_menu = $(widget).find(".header__collections-menu");
    collections_menu.attr("data-subcollections-items-limit", limit);

    $(widget).find(".header__collections-submenu").each(function() {
      let collection_elem = $(this).parents(".header__collections-item.is-level-1");
      let collection_elem_more_controls = collection_elem.find(".header__collections-show-more");

      $(this).find(".header__collections-item").removeClass("is-hide");
      $(this).find('.header__collections-item:nth-child(n+' + (parseInt(limit) + 1) + ')').addClass("is-hide");
      collection_elem_more_controls.find(".js-show-more-subcollections").removeClass("is-active");

      if ($(this).find(".header__collections-item").length > parseInt(limit)) {
        collection_elem_more_controls.addClass("is-show");
      } else {
        collection_elem_more_controls.removeClass("is-show");
      }
    });
  }
});

} catch(error) {
  console.error('Widget "widget-type_system_widget_v4_header_1" throwed an error: "' + error.stack + '"')
}
;try {
  let widget = '.widget-type_system_widget_v4_alerts';
  let $widget = $('.widget-type_system_widget_v4_alerts');
  let alertsSettings = $widget.find('[data-micro-alerts-settings]').data('micro-alerts-settings');

function replaceAlertCheckIcon(message) {
  let iconCheck = '<span class="icon-check" style="margin-right:5px;"></span>';
  if (message.indexOf('✓') != -1 ) {
    return message.replace(/✓/gi, iconCheck);
  } else {
    return `${iconCheck} ${message}`;
  }
}

function replaceAlertWarningIcon(message) {
  let iconWarning = '<span class="icon-exclamation-triangle" style="margin-right:5px;"></span>';
  if (message.indexOf('⚠') != -1 ) {
    return message.replace(/⚠/gi, iconWarning);
  } else {
    return `${iconWarning} ${message}`;
  }
}


if (window.location.pathname == '/' && Cookies.get('lite_preorder')) {
  let success_feedback = alertsSettings['success_preorder'];

  microAlert(replaceAlertCheckIcon(success_feedback), 5000, {
    modificator: 'success-notice'
  });
  Cookies.remove('lite_preorder');
}

} catch(error) {
  console.error('Widget "widget-type_system_widget_v4_alerts" throwed an error: "' + error.stack + '"')
}
;try {
  let widget = '.widget-type_system_widget_v4_callback_modal_1';
  let $widget = $('.widget-type_system_widget_v4_callback_modal_1');
  $(document).ready(function() {
  $(widget).find(".js-hide-modal").on("click", function() {
    $(widget).removeClass("is-show-fullscreen");
  });

  $(widget).on("click", function(event) {
    if ($(event.target).closest(widget + ' .layout__content').length) {
      return;
    }

    $(widget).removeClass("is-show-fullscreen");
  });
});


} catch(error) {
  console.error('Widget "widget-type_system_widget_v4_callback_modal_1" throwed an error: "' + error.stack + '"')
}
;try {
  let widget = '.widget-type_system_widget_v4_modal_cookie_1';
  let $widget = $('.widget-type_system_widget_v4_modal_cookie_1');
  $widget.ready(function() {
  if ($widget.find('.cookie-banner').length) {
    if (!Cookies.get('was')) {
      $widget.addClass("is-show-fullscreen");
    }

    $('.js-cookies-button').on('click', function() {
      $widget.removeClass("is-show-fullscreen");
      Cookies.set('was', true, {
        expires: 365,
        path: '/'
      });
    })
  }
});

} catch(error) {
  console.error('Widget "widget-type_system_widget_v4_modal_cookie_1" throwed an error: "' + error.stack + '"')
}
;try {
  let widget = '.widget-type_system_widget_v4_notification_add_to_cart_1';
  let $widget = $('.widget-type_system_widget_v4_notification_add_to_cart_1');
  

$(document).ready(function() {
  $(widget).find(".js-hide-notification").on("click", function() {
    $(widget).removeClass("is-show-fullscreen");
  });

  $(widget).on("click", function(event) {
    if ($(event.target).closest(widget + ' .layout__content').length) {
      return;
    }

    $(widget).removeClass("is-show-fullscreen");
  });
});

} catch(error) {
  console.error('Widget "widget-type_system_widget_v4_notification_add_to_cart_1" throwed an error: "' + error.stack + '"')
}
;try {
  let widget = '.widget-type_system_widget_v4_preorder_1';
  let $widget = $('.widget-type_system_widget_v4_preorder_1');

} catch(error) {
  console.error('Widget "widget-type_system_widget_v4_preorder_1" throwed an error: "' + error.stack + '"')
}
;try {
  let widget = '.widget-type_system_widget_v4_sidebar_collections_menu_1';
  let $widget = $('.widget-type_system_widget_v4_sidebar_collections_menu_1');
  $(document).ready(function() {
  $(widget).find(".sidebar-collections__menu .is-current").addClass("is-show");

  $(widget).find(".js-show-submenu").on("click", function() {
    var cur_item = $(this).parents(".sidebar-collections__item:first");
    cur_item.toggleClass("is-show");
  });
});

} catch(error) {
  console.error('Widget "widget-type_system_widget_v4_sidebar_collections_menu_1" throwed an error: "' + error.stack + '"')
}
;try {
  let widget = '.widget-type_system_widget_v4_button_on_top_1';
  let $widget = $('.widget-type_system_widget_v4_button_on_top_1');
  let scroll_timeout;

$widget.find(".js-go-top-page").on("click", function() {
  $('html, body').animate({scrollTop: 0}, 500);
  return false;
});

$(window).on("scroll", function() {
  clearTimeout(scroll_timeout);
  scroll_timeout = setTimeout( function() {
    showButtonOnTop($widget.find(".js-go-top-page"));
  }, 50);
});

function showButtonOnTop(btn) {
  if ($(window).scrollTop() >= $(window).height()) {
    btn.addClass("is-show");
  } else {
    btn.removeClass("is-show");
  }
}


 
} catch(error) {
  console.error('Widget "widget-type_system_widget_v4_button_on_top_1" throwed an error: "' + error.stack + '"')
}
;try {
  let widget = '.widget-type_system_widget_v4_cart_fixed_button_1';
  let $widget = $('.widget-type_system_widget_v4_cart_fixed_button_1');
  if (window.location.pathname == '/new_order') {
  $widget.find(".js-cart-fixed-btn").addClass("is-no-visible");
}

let scroll_timeout;

$(window).on("scroll", function() {
  clearTimeout(scroll_timeout);
  scroll_timeout = setTimeout( function() {
    showCartFixedBtn($widget.find(".js-cart-fixed-btn"));
  }, 50);
});

function showCartFixedBtn(btn) {
  if ($(window).scrollTop() >= 100) {
    btn.addClass("is-show");
  } else {
    btn.removeClass("is-show");
  }
}

} catch(error) {
  console.error('Widget "widget-type_system_widget_v4_cart_fixed_button_1" throwed an error: "' + error.stack + '"')
}
;try {
  let widget = '.widget-type_system_widget_v4_catalog_3';
  let $widget = $('.widget-type_system_widget_v4_catalog_3');
  $(function() {
  var isTouch = !!('ontouchstart' in window || navigator.msMaxTouchPoints);
  var infinityProductsTempPage = [];

  if (isTouch) {
    $(widget).find(".product-preview").addClass("is-touch");
  }


  function loadMoreCollectionProducts(productListBlock, showMoreBtn) {
    let next_page = productListBlock.data('collectionInfinity');

    if (next_page && next_page != '') {
      if (infinityProductsTempPage.indexOf(next_page) > -1) {
        return;
      }

      infinityProductsTempPage.push(next_page);
      showMoreBtn.addClass('is-loading');

      $.ajax({
        url: next_page,
        dataType: 'html'
      })
        .done(function(resultDom) {
          let new_products = $(resultDom).find('[data-collection-infinity]');
          let next = new_products.data('collectionInfinity');

          productListBlock.append( new_products.html() );
          productListBlock.data('collectionInfinity', next);

          productListBlock.find('[data-product-id]').each(function(index, el) {
            Products.initInstance($(el));
          });

          productListBlock.each(function(index, el) {
            new LazyLoad({
              container: $(el).get(0),
              elements_selector: '.lazyload',
              use_native: 'loading' in document.createElement('img')
            });
          });

          if (productListBlock.data('collectionInfinity') == '') {
            showMoreBtn.parents(".layout").hide();
          }
        })
        .always(function() {
          showMoreBtn.removeClass('is-loading');
        })
    }
  }

  function ModalProductPreview(widgetClass) {
    let dop_class = widgetClass.slice(1);

    this.rootNode = $('<div class="modal-product-preview ' + dop_class + '"></div>').appendTo("body");
    this.contentNode = $('<div class="modal-product-preview__content"></div>').appendTo(this.rootNode);
    this.overlayNode = $('<div class="modal-product-preview-overlay ' + dop_class + '"></div>').appendTo("body");
    this.closeBtnNode = $('<button class="button modal-product-preview__close-btn"><span class="icon icon-times"></span></button>').appendTo(this.rootNode);

    this.closeBtnNode.on("click", () => {
      this.close();
    });

    this.overlayNode.on("click", () => {
      this.close();
    });

    this.open = function(content) {
      this.contentNode.html('');
      content.appendTo(this.contentNode);

      this.rootNode.find("[data-option-selector]").remove();

      $('.modal-product-preview').each(function(index, el) {
        new LazyLoad({
          container: $(el).get(0),
          elements_selector: '.modal-lazyload',
          use_native: 'loading' in document.createElement('img')
        });
      });

      Products.initInstance(this.rootNode.find('[data-product-id]'))
        .done(() => {
          this.overlayNode.addClass("is-open");
          this.rootNode.addClass("is-open");
        })
        .fail((onFail) => { console.log('onFail', onFail) });
    }

    this.close = function() {
      this.overlayNode.removeClass("is-open");
      this.rootNode.removeClass("is-open");
    }
  }

  $(function() {
  /* SHOW MODAL PREVIEW */
    let modalProductPreview = new ModalProductPreview(widget);

    $widget.on("click", ".js-show-modal-product", function() {
      let modal_product_block = $(this).parents(".product-preview-elem").find(".hidden-product-preview-modal [data-product-id]").clone();
      modalProductPreview.open(modal_product_block);
    });

  
  });

  if (window.location.pathname == '/favorites') {
    EventBus.subscribe('remove_item:insales:favorites_products', (data) => {
      $widget.find('[data-product-id="' + data.action.item + '"]').parent('.product-preview-elem').remove();
      if (data.products.length == 0 ) {
        $widget.find('.empty-catalog-message').removeClass('hidden');
      }
    })
  }
});

} catch(error) {
  console.error('Widget "widget-type_system_widget_v4_catalog_3" throwed an error: "' + error.stack + '"')
}
;try {
  let widget = '.widget-type_system_widget_v4_bottom_navigation_bar_1';
  let $widget = $('.widget-type_system_widget_v4_bottom_navigation_bar_1');
  $(function() {
  let location_path = window.location.pathname;

  if (location_path.indexOf('client_account') !== -1) {
    $widget.find(".navigation-bar__item-profile").addClass("is-active is-cur-page");
  }

  $widget.find("[data-show-navigation-bar-panel]").on("click", function() {
    let navigation_bar_item = $(this);
    let panel_name = navigation_bar_item.data("showNavigationBarPanel");
    let panel = $widget.find('[data-navigation-bar-panel="' + panel_name + '"]');

    if (panel.is(".is-show")) {
      bodyScrollLock.clearAllBodyScrollLocks();
      panel.removeClass("is-show");
      $('header').css('display', 'block');

      navigation_bar_item.removeClass("is-active");
      $widget.find(".navigation-bar__item.is-cur-page").addClass("is-active");
    } else {
      let targetElement = panel.get(0);
      if (targetElement) {
        bodyScrollLock.disableBodyScroll(targetElement);
      }

      $('header').css('display', 'none');

      let panel_bottom_pos = navigation_bar_item.parents(".layout").innerHeight();
      $widget.find('[data-navigation-bar-panel].is-show').removeClass("is-show");
      panel.css("bottom", panel_bottom_pos).addClass("is-show");

      if (panel_name == "search") {
        setTimeout(function() {
          panel.find("[data-search-field]").focus();
        }, 500);
      }

      $widget.find(".navigation-bar__item.is-active").removeClass("is-active");
      navigation_bar_item.addClass("is-active");
    }
  });

  $widget.find(".navigation-bar__item-home").on("click", function() {
    if (location_path == "/") {
      $widget.find('.navigation-bar-panel.is-show').removeClass("is-show");
      $widget.find(".navigation-bar__item.is-active").removeClass("is-active");
      $widget.find(".navigation-bar__item.is-cur-page").addClass("is-active");
    }
  });

  $widget.find(".js-hide-navigation-bar-panel").on("click", function() {
    $widget.find('[data-navigation-bar-panel].is-show').removeClass("is-show");
    $widget.find(".navigation-bar__item.is-active").removeClass("is-active");
    $widget.find(".navigation-bar__item.is-cur-page").addClass("is-active");
    bodyScrollLock.clearAllBodyScrollLocks();
    $('header').css('display', 'block');
  });

  $widget.find(".collections__menu .is-current").addClass("is-show");
  $widget.find(".js-show-submenu").on("click", function() {
    let cur_item = $(this).parents(".collections__item:first");
    cur_item.toggleClass("is-show");
  });

  $widget.find(".js-show-collections-search").on("click", function() {
    let search_block = $(this).parents(".collections-search");
    search_block.toggleClass("is-show");

    if (search_block.is(".is-show")) {
      setTimeout(function() {
        search_block.find(".collections-search__field").focus();
      }, 50);
    }
  });
});

} catch(error) {
  console.error('Widget "widget-type_system_widget_v4_bottom_navigation_bar_1" throwed an error: "' + error.stack + '"')
}
;try {
  let widget = '.widget-type_system_widget_v4_filter_sort_3';
  let $widget = $('.widget-type_system_widget_v4_filter_sort_3');
  $(function() {
  initFilterRangeSlider($widget.find(".js-filter-range"));

  $widget.find(".filter-item").each(function() {
    if ($(this).find(".filter-option__field:checked").length == 1 ) {
      let title = $(this).find(".filter-option__field:checked").parent('label').attr('title');
      $(this).find('.filter-item__name .text').text(title);


    } else if ($(this).find(".filter-option__field:checked").length > 1 ) {
      let count = $(this).find(".filter-option__field:checked").length;
      $(this).addClass('select-big');
      $(this).find('.filter-item__name').append('<span class="count_name">' + count + '</span>');
    }
  });

  $widget.find(".js-filter-range").each(function() {

    if ( !$(this).find('.filter-range__field-min').is(':disabled') || !$(this).find('.filter-range__field-max').is(':disabled')) {
      $(this).parents('.filter-item').addClass('is-active-filters');
    }


  });

  if ($widget.find(".sorting .collection-order-items:checked").length > 0 ) {
    $widget.find(".filter-mobile-controls").addClass("is-active-sorting");
  }

  $(document).click(function(event) {
    if (!$(event.target).closest(".filter-item").length) {
      $widget.find(".filter-item.is-show .filter-item__content").stop().slideUp(250, function() {
        $(this).removeClass("is-show");
        $widget.find(".js-hide-filter-content").removeClass("visible");
      });
    }
  });

  $widget.find(".js-all-filters").on("click", function() {
    $widget.find('.filter__content').addClass('is-show-items');
  });

  $widget.find(".js-reset-filter").on("click", function() {
    let filter_form = $widget.find('form.filter');

    filter_form.find(".filter-option__field").prop('checked', false);
    filter_form.find(".collection-order__field").prop('checked', false);
    filter_form.find(".filter-range__field").prop('disabled', true);

    filter_form.submit();
  });

  $widget.find(".sorting .button_wide__submit").on("click", function() {
    let filter_form = $(this).parents(".sorting").find('form');
    filter_form.submit();
  });

  $widget.find(".js-open-order-list").on("click", function() {
    $(this).parents(".collection-order").toggleClass("is-show");
    $widget.find(".order-overlay").toggleClass("is-show");
  });

  $widget.find(".icon-times._hide").on("click", function() {
    $(this).addClass("click");
    $(this).parents(".filter-item").find(".filter-option__field").prop('checked', false);
    $(this).parents(".filter-item").removeClass("selected");
  });

  $widget.find(".js-hide-filter").on("click", function() {
    $widget.find(".filter").removeClass("is-show-mobile");
  });

  $widget.find(".js-hide-sorting").on("click", function() {
    $widget.find(".sorting-modal").removeClass("is-show-mobile");
  });

  $widget.find(".sorting-modal").on("click", function(event) {
    if ($(event.target).hasClass('sorting-modal') ) {
      $widget.find(".sorting-modal").removeClass("is-show-mobile");
    }
  });

  $widget.find(".js-hide-order-list").on("click", function() {
    $widget.find(".collection-order, .order-overlay").removeClass("is-show");
  });
  $(document).on("click", function(event) {
    if ($(event.target).closest(".collection-order").length) {
      return;
    }

    $widget.find(".collection-order.is-show, .order-overlay").removeClass("is-show");
  });

  if ($widget.find(".filter-option__field:checked").length > 0 || $widget.find(".js-filter-range .filter-range__field:not(:disabled)").length > 0) {
    $widget.find(".js-show-mobile-filter, .filter__head-reset").addClass("is-active-filters");
  }

  $widget.find(".filter-item").each(function() {
    if ($(this).find(".collection-order__field:checked").length > 0 || $(this).find(".filter-option__field:checked").length > 0 || $(this).find(".js-filter-range .filter-range__field:not(:disabled)").length > 0) {
      $(this).addClass("is-active-filters");
    }
  });


  $widget.find(".filter-range__values-item").on("click", function() {
    $(this).find(".filter-range__field").prop('disabled', false).focus();
  });

  $widget.find(".js-toggle-show-filter-item").on("click", function() {
    let filter_item = $(this).parents(".filter-item");

    if (filter_item.is(".is-show")) {
      filter_item.find(".filter-item__content").stop().slideUp(250, function() {
        filter_item.removeClass("is-show");
        $widget.find(".js-hide-filter-content").removeClass("visible");
      });
    } else {
      $widget.find(".filter-item.is-show .filter-item__content").stop().slideUp(250, function() {
        $(this).removeClass("is-show");
        $widget.find(".js-hide-filter-content").removeClass("visible");
      });


      filter_item.find(".filter-item__content").stop().slideDown(250, function() {
        filter_item.addClass("is-show");
        $widget.find(".js-hide-filter-content").addClass("visible");
      });
    }
  });

  if (window.matchMedia('(max-width: 767px)').matches) {
    $widget.find(".js-hide-filter-content").on("click", function() {
      $widget.find(".filter-item").removeClass("is-show");
      $(this).removeClass("visible");
    });
  }

  $widget.find('.js-more-items').on("click", function() {
    $(this).parent().find('.filter-item__list-item.hidden').removeClass('hidden').addClass('show');
    $(this).parent().find('.js-hide-items').removeClass('hidden').addClass('show');
    $(this).addClass('hidden');
  });

  $widget.find('.js-hide-items').on("click", function() {
    $(this).parent().find('.filter-item__list-item.show').toggleClass('hidden show');
    $(this).toggleClass('show hidden');
    $(this).parent().find('.js-more-items').toggleClass('hidden show');
  });

  $widget.find(".js-show-mobile-filter").on("click", function() {
    $widget.find(".filter").addClass("is-show-mobile");
  });
  $widget.find(".js-show-mobile-sorting").on("click", function() {
    $widget.find(".sorting-modal").addClass("is-show-mobile");
  });


  $widget.find(".js-hide-mobile-filter").on("click", function() {
    $widget.find(".filter").removeClass("is-show-mobile");
  });

  $widget.find(".filter-item__list-item, .collection-order__list, .filter-range").on("click", function() {
    if ($widget.find(".filter-option__field:checked").length > 0 || $widget.find(".filter-range__field").is(':disabled').length < 2 || $widget.find(".collection-order__field:checked").length > 0 ) {
      $widget.find(".filter__controls > .button_wide").addClass("is-active-filters-controls");
      $(this).parents(".filter-item").addClass("selected");
      $(this).parents(".layout__content").find(".filter__controls").addClass("is-selected");
    } else {
      $widget.find(".filter__controls > .button_wide").removeClass("is-active-filters-controls");
      $(this).parents(".filter-item").removeClass("selected");
      $(this).parents(".layout__content").find(".filter__controls").removeClass("is-selected");
    }
  });


  //ограничение инпутов на цифры
  let cur_widget = document.querySelector(widget);
  cur_widget.querySelectorAll('.filter-range__field').forEach(function(item) {
    item.oninput = function() {
      this.value = this.value.replace(/[^0-9]/g, '').replace(/(\..*)\./g, '$1')
    }
  })

  // Сортировка
  $(document).on("change", ".js-sorting-trigger", function() {
    let thisEl = $(this);
    let thisForm = thisEl.parents('form:first');
    let order_val = thisForm.find('[name="order"]').val();

    if (order_val == '') {
      $('[name="order"]').attr('disabled', 'disabled');
    }

    thisForm.find(".collection-order").addClass("is-submit");
    thisForm.submit();
  });

});

function filterSubmit($widget) {
  let filter_form = $widget.find('form.filter.live-submit');
  if (filter_form) {
    filter_form.submit();
  }
}

$widget.find(".filter input[type='checkbox'], .filter input[type='radio']").on("change", function() {
  filterSubmit($widget);
});

$widget.find(".sorting.live-submit input[type='radio']").on("change", function() {
  let filter_form_sort = $widget.find('.sorting.live-submit form');
  if (filter_form_sort) {
    filter_form_sort.submit();
  }
});

function initFilterRangeSlider(filterRange) {

  filterRange.each(function() {
    let widget = $(this).parents(".layout:first");
    let filter_range = $(this);
    let filter_range_slider = filter_range.find(".filter-range__slider")[0];
    let filter_range_field_min = filter_range.find(".filter-range__field-min");
    let filter_range_field_max = filter_range.find(".filter-range__field-max");

    let slider_min_value = Math.floor(filter_range.data("range-min"));
    let slider_max_value = Math.floor(filter_range.data("range-max"));
    let slider_start_val = Math.floor(filter_range.data("range-start"));
    let slider_end_val = Math.floor(filter_range.data("range-end"));
    let slider_step = Math.floor(filter_range.data("range-step"));

    let rangeMin = slider_min_value == slider_max_value ? 0 : slider_min_value;
    let rangeMax = slider_max_value == 0 ? 1 : slider_max_value;

    noUiSlider.create(filter_range_slider, {
      start: [slider_start_val, slider_end_val],
      range: {
        'min': rangeMin,
        'max': rangeMax
      },
      step: slider_step,
      connect: true
    });

    filter_range_slider.noUiSlider.on('slide', function() {
      changeRangeValue(
        filter_range_slider.noUiSlider.get()[0],
        filter_range_slider.noUiSlider.get()[1]
      );
    });

    filter_range_slider.noUiSlider.on('set', function() {
      filterSubmit(widget);
      changeRangeValue(
        filter_range_slider.noUiSlider.get()[0],
        filter_range_slider.noUiSlider.get()[1]
      );
    });

    changeRangeValue(
      filter_range_slider.noUiSlider.get()[0],
      filter_range_slider.noUiSlider.get()[1]
    );

    function changeRangeValue(curMinValue, curMaxValue) {
      filter_range_field_min.val(Math.floor(curMinValue));
      filter_range_field_max.val(Math.floor(curMaxValue));

      curMinValue > slider_min_value
        ? filter_range_field_min.prop('disabled', false)
        : filter_range_field_min.prop('disabled', true);

      curMaxValue < slider_max_value
        ? filter_range_field_max.prop('disabled', false)
        : filter_range_field_max.prop('disabled', true);
    }

    filter_range_field_min.on("blur", function() {
      filter_range_slider.noUiSlider.set(
        [$(this).val(), filter_range_slider.noUiSlider.get()[1]]
      );
    });

    filter_range_field_max.on("blur", function() {
      filter_range_slider.noUiSlider.set(
        [filter_range_slider.noUiSlider.get()[0], $(this).val()]
      );
    });
  });
}

} catch(error) {
  console.error('Widget "widget-type_system_widget_v4_filter_sort_3" throwed an error: "' + error.stack + '"')
}
;try {
  let widget = '.widget-type_system_widget_v4_footer_19';
  let $widget = $('.widget-type_system_widget_v4_footer_19');
  $(function() {
  $(widget).find(".js-show-mobile-submenu").on("click", function() {
    $(this).parents(".menu-item:first").toggleClass("is-show-mobile");
  });
});

} catch(error) {
  console.error('Widget "widget-type_system_widget_v4_footer_19" throwed an error: "' + error.stack + '"')
}
;try {
  let widget = '.widget-type_system_widget_v4_special_products_20';
  let $widget = $('.widget-type_system_widget_v4_special_products_20');
  $(function() {
  var mobile_point = 767;

  $widget.each(function(index, el) {
    new LazyLoad({
      container: $(el).get(0),
      elements_selector: '.lazyload',
      use_native: 'loading' in document.createElement('img')
    });
  });
});

} catch(error) {
  console.error('Widget "widget-type_system_widget_v4_special_products_20" throwed an error: "' + error.stack + '"')
}
;try {
  let widget = '.widget-type_system_widget_v4_sidebar_social_1';
  let $widget = $('.widget-type_system_widget_v4_sidebar_social_1');
  $(function() {
  $widget.each(function(index, el) {
    new LazyLoad({
      container: $(el).get(0),
      elements_selector: '.lazyload'
    });
  });
});

} catch(error) {
  console.error('Widget "widget-type_system_widget_v4_sidebar_social_1" throwed an error: "' + error.stack + '"')
}

</script>












<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/davidhhh123/jsall@main/style.css" media="all" onload="this.media=&#39;all&#39;">










<link href="https://cdn.jsdelivr.net/gh/davidhhh123/jsall@main/theme.css" rel="stylesheet" type="text/css" onload="document.body.classList.add(&#39;settings_loaded&#39;);">


  <script src="https://cdn.jsdelivr.net/gh/davidhhh123/jsall@main/theme.js" charset="utf-8"></script>

</body></html>
{% endif %}